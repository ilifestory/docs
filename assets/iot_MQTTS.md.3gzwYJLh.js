import{_ as s,c as a,o as n,a4 as e,bX as l}from"./chunks/framework.CCJHkvW2.js";const u=JSON.parse('{"title":"MQTTSé…ç½®","description":"","frontmatter":{},"headers":[],"relativePath":"iot/MQTTS.md","filePath":"iot/MQTTS.md","lastUpdated":1708482714000}'),p={name:"iot/MQTTS.md"},o=e('<h1 id="mqttsé…ç½®" tabindex="-1">MQTTSé…ç½® <a class="header-anchor" href="#mqttsé…ç½®" aria-label="Permalink to &quot;MQTTSé…ç½®&quot;">â€‹</a></h1><p>å‚è€ƒæ–‡çŒ®åœ°å€ (<a href="https://www.emqx.com/zh/blog/emqx-server-ssl-tls-secure-connection-configuration-guide" target="_blank" rel="noreferrer">https://www.emqx.com/zh/blog/emqx-server-ssl-tls-secure-connection-configuration-guide</a>)</p><p><img src="'+l+`" alt="An image"></p><h2 id="è‡ªç­¾åè¯ä¹¦" tabindex="-1">è‡ªç­¾åè¯ä¹¦ <a class="header-anchor" href="#è‡ªç­¾åè¯ä¹¦" aria-label="Permalink to &quot;è‡ªç­¾åè¯ä¹¦&quot;">â€‹</a></h2><h3 id="æ ¹è¯ä¹¦" tabindex="-1">æ ¹è¯ä¹¦ <a class="header-anchor" href="#æ ¹è¯ä¹¦" aria-label="Permalink to &quot;æ ¹è¯ä¹¦&quot;">â€‹</a></h3><p>é¦–å…ˆï¼Œæˆ‘ä»¬éœ€è¦ä¸€ä¸ªè‡ªç­¾åçš„ CA è¯ä¹¦ã€‚ç”Ÿæˆè¿™ä¸ªè¯ä¹¦éœ€è¦æœ‰ä¸€ä¸ªç§é’¥ä¸ºå®ƒç­¾åï¼Œå¯ä»¥æ‰§è¡Œä»¥ä¸‹å‘½ä»¤æ¥ç”Ÿæˆç§é’¥ï¼š</p><div class="language-bash line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki material-theme-palenight vp-code" tabindex="0"><code><span class="line"><span style="color:#FFCB6B;">openssl</span><span style="color:#C3E88D;"> genrsa</span><span style="color:#C3E88D;"> -out</span><span style="color:#C3E88D;"> ca.key</span><span style="color:#F78C6C;"> 2048</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>è¿™ä¸ªå‘½ä»¤å°†ç”Ÿæˆä¸€ä¸ªå¯†é’¥é•¿åº¦ä¸º 2048 çš„å¯†é’¥å¹¶ä¿å­˜åœ¨ ca.key ä¸­ã€‚æœ‰äº†è¿™ä¸ªå¯†é’¥ï¼Œå°±å¯ä»¥ç”¨å®ƒæ¥ç”Ÿæˆ EMQX çš„æ ¹è¯ä¹¦äº†ï¼š</p><div class="language-bash line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki material-theme-palenight vp-code" tabindex="0"><code><span class="line"><span style="color:#FFCB6B;">openssl</span><span style="color:#C3E88D;"> req</span><span style="color:#C3E88D;"> -x509</span><span style="color:#C3E88D;"> -new</span><span style="color:#C3E88D;"> -nodes</span><span style="color:#C3E88D;"> -key</span><span style="color:#C3E88D;"> ca.key</span><span style="color:#C3E88D;"> -sha256</span><span style="color:#C3E88D;"> -days</span><span style="color:#F78C6C;"> 3650</span><span style="color:#C3E88D;"> -out</span><span style="color:#C3E88D;"> ca.pem</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><h3 id="å®ä½“è¯ä¹¦-emqxä¸ºä¾‹" tabindex="-1">å®ä½“è¯ä¹¦ï¼ˆEMQXä¸ºä¾‹ï¼‰ <a class="header-anchor" href="#å®ä½“è¯ä¹¦-emqxä¸ºä¾‹" aria-label="Permalink to &quot;å®ä½“è¯ä¹¦ï¼ˆEMQXä¸ºä¾‹ï¼‰&quot;">â€‹</a></h3><h4 id="å®ä½“-åœ¨è¿™é‡ŒæŒ‡çš„æ˜¯-emqx-ä¹Ÿéœ€è¦ä¸€ä¸ªè‡ªå·±çš„ç§é’¥å¯¹æ¥ä¿è¯å®ƒå¯¹è‡ªå·±è¯ä¹¦çš„æ§åˆ¶æƒã€‚ç”Ÿæˆè¿™ä¸ªå¯†é’¥çš„è¿‡ç¨‹å’Œä¸Šé¢ç±»ä¼¼" tabindex="-1">å®ä½“ï¼ˆåœ¨è¿™é‡ŒæŒ‡çš„æ˜¯ EMQXï¼‰ä¹Ÿéœ€è¦ä¸€ä¸ªè‡ªå·±çš„ç§é’¥å¯¹æ¥ä¿è¯å®ƒå¯¹è‡ªå·±è¯ä¹¦çš„æ§åˆ¶æƒã€‚ç”Ÿæˆè¿™ä¸ªå¯†é’¥çš„è¿‡ç¨‹å’Œä¸Šé¢ç±»ä¼¼ï¼š <a class="header-anchor" href="#å®ä½“-åœ¨è¿™é‡ŒæŒ‡çš„æ˜¯-emqx-ä¹Ÿéœ€è¦ä¸€ä¸ªè‡ªå·±çš„ç§é’¥å¯¹æ¥ä¿è¯å®ƒå¯¹è‡ªå·±è¯ä¹¦çš„æ§åˆ¶æƒã€‚ç”Ÿæˆè¿™ä¸ªå¯†é’¥çš„è¿‡ç¨‹å’Œä¸Šé¢ç±»ä¼¼" aria-label="Permalink to &quot;å®ä½“ï¼ˆåœ¨è¿™é‡ŒæŒ‡çš„æ˜¯ EMQXï¼‰ä¹Ÿéœ€è¦ä¸€ä¸ªè‡ªå·±çš„ç§é’¥å¯¹æ¥ä¿è¯å®ƒå¯¹è‡ªå·±è¯ä¹¦çš„æ§åˆ¶æƒã€‚ç”Ÿæˆè¿™ä¸ªå¯†é’¥çš„è¿‡ç¨‹å’Œä¸Šé¢ç±»ä¼¼ï¼š&quot;">â€‹</a></h4><div class="language-bash line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki material-theme-palenight vp-code" tabindex="0"><code><span class="line"><span style="color:#FFCB6B;">openssl</span><span style="color:#C3E88D;"> genrsa</span><span style="color:#C3E88D;"> -out</span><span style="color:#C3E88D;"> emqx.key</span><span style="color:#F78C6C;"> 2048</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><h4 id="æ–°å»º-openssl-cnf-æ–‡ä»¶" tabindex="-1">æ–°å»º openssl.cnf æ–‡ä»¶ <a class="header-anchor" href="#æ–°å»º-openssl-cnf-æ–‡ä»¶" aria-label="Permalink to &quot;æ–°å»º openssl.cnf æ–‡ä»¶&quot;">â€‹</a></h4><div class="language-bash line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki material-theme-palenight vp-code" tabindex="0"><code><span class="line"><span style="color:#89DDFF;">[</span><span style="color:#BABED8;">req</span><span style="color:#89DDFF;">]</span></span>
<span class="line"><span style="color:#FFCB6B;">default_bits</span><span style="color:#C3E88D;">  =</span><span style="color:#F78C6C;"> 2048</span></span>
<span class="line"><span style="color:#FFCB6B;">distinguished_name</span><span style="color:#C3E88D;"> =</span><span style="color:#C3E88D;"> req_distinguished_name</span></span>
<span class="line"><span style="color:#FFCB6B;">req_extensions</span><span style="color:#C3E88D;"> =</span><span style="color:#C3E88D;"> req_ext</span></span>
<span class="line"><span style="color:#FFCB6B;">x509_extensions</span><span style="color:#C3E88D;"> =</span><span style="color:#C3E88D;"> v3_req</span></span>
<span class="line"><span style="color:#FFCB6B;">prompt</span><span style="color:#C3E88D;"> =</span><span style="color:#C3E88D;"> no</span></span>
<span class="line"><span style="color:#89DDFF;">[</span><span style="color:#BABED8;">req_distinguished_name</span><span style="color:#89DDFF;">]</span></span>
<span class="line"><span style="color:#FFCB6B;">countryName</span><span style="color:#C3E88D;"> =</span><span style="color:#C3E88D;"> CN</span></span>
<span class="line"><span style="color:#FFCB6B;">stateOrProvinceName</span><span style="color:#C3E88D;"> =</span><span style="color:#C3E88D;"> Zhejiang</span></span>
<span class="line"><span style="color:#FFCB6B;">localityName</span><span style="color:#C3E88D;"> =</span><span style="color:#C3E88D;"> Hangzhou</span></span>
<span class="line"><span style="color:#FFCB6B;">organizationName</span><span style="color:#C3E88D;"> =</span><span style="color:#C3E88D;"> EMQX</span></span>
<span class="line"><span style="color:#FFCB6B;">commonName</span><span style="color:#C3E88D;"> =</span><span style="color:#C3E88D;"> Server</span><span style="color:#C3E88D;"> certificate</span></span>
<span class="line"><span style="color:#89DDFF;">[</span><span style="color:#BABED8;">req_ext</span><span style="color:#89DDFF;">]</span></span>
<span class="line"><span style="color:#FFCB6B;">subjectAltName</span><span style="color:#C3E88D;"> =</span><span style="color:#C3E88D;"> @alt_names</span></span>
<span class="line"><span style="color:#89DDFF;">[</span><span style="color:#BABED8;">v3_req</span><span style="color:#89DDFF;">]</span></span>
<span class="line"><span style="color:#FFCB6B;">subjectAltName</span><span style="color:#C3E88D;"> =</span><span style="color:#C3E88D;"> @alt_names</span></span>
<span class="line"><span style="color:#89DDFF;">[</span><span style="color:#BABED8;">alt_names</span><span style="color:#89DDFF;">]</span></span>
<span class="line"><span style="color:#FFCB6B;">IP.1</span><span style="color:#C3E88D;"> =</span><span style="color:#C3E88D;"> BROKER_ADDRESS</span></span>
<span class="line"><span style="color:#FFCB6B;">DNS.1</span><span style="color:#C3E88D;"> =</span><span style="color:#C3E88D;"> BROKER_ADDRESS</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br></div></div><p>ğŸ“ req_distinguished_name ï¼šæ ¹æ®æƒ…å†µè¿›è¡Œä¿®æ”¹ï¼Œ</p><p>ğŸ“ alt_namesï¼š BROKER_ADDRESS ä¿®æ”¹ä¸º EMQX æœåŠ¡å™¨å®é™…çš„ IP æˆ– DNS åœ°å€ï¼Œä¾‹å¦‚ï¼šIP.1 = 127.0.0.1ï¼Œæˆ– DNS.1 = broker.xxx.com</p><h4 id="ç„¶åä»¥è¿™ä¸ªå¯†é’¥å’Œé…ç½®ç­¾å‘ä¸€ä¸ªè¯ä¹¦è¯·æ±‚" tabindex="-1">ç„¶åä»¥è¿™ä¸ªå¯†é’¥å’Œé…ç½®ç­¾å‘ä¸€ä¸ªè¯ä¹¦è¯·æ±‚ï¼š <a class="header-anchor" href="#ç„¶åä»¥è¿™ä¸ªå¯†é’¥å’Œé…ç½®ç­¾å‘ä¸€ä¸ªè¯ä¹¦è¯·æ±‚" aria-label="Permalink to &quot;ç„¶åä»¥è¿™ä¸ªå¯†é’¥å’Œé…ç½®ç­¾å‘ä¸€ä¸ªè¯ä¹¦è¯·æ±‚ï¼š&quot;">â€‹</a></h4><div class="language-bash line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki material-theme-palenight vp-code" tabindex="0"><code><span class="line"><span style="color:#FFCB6B;">openssl</span><span style="color:#C3E88D;"> req</span><span style="color:#C3E88D;"> -new</span><span style="color:#C3E88D;"> -key</span><span style="color:#C3E88D;"> ./emqx.key</span><span style="color:#C3E88D;"> -config</span><span style="color:#C3E88D;"> openssl.cnf</span><span style="color:#C3E88D;"> -out</span><span style="color:#C3E88D;"> emqx.csr</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><h4 id="ç„¶åä»¥æ ¹è¯ä¹¦æ¥ç­¾å‘-å®ä½“-emqx-è¯ä¹¦" tabindex="-1">ç„¶åä»¥æ ¹è¯ä¹¦æ¥ç­¾å‘ å®ä½“ï¼ˆEMQXï¼‰ è¯ä¹¦ï¼š <a class="header-anchor" href="#ç„¶åä»¥æ ¹è¯ä¹¦æ¥ç­¾å‘-å®ä½“-emqx-è¯ä¹¦" aria-label="Permalink to &quot;ç„¶åä»¥æ ¹è¯ä¹¦æ¥ç­¾å‘ å®ä½“ï¼ˆEMQXï¼‰ è¯ä¹¦ï¼š&quot;">â€‹</a></h4><div class="language-bash line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki material-theme-palenight vp-code" tabindex="0"><code><span class="line"><span style="color:#FFCB6B;">openssl</span><span style="color:#C3E88D;"> x509</span><span style="color:#C3E88D;"> -req</span><span style="color:#C3E88D;"> -in</span><span style="color:#C3E88D;"> ./emqx.csr</span><span style="color:#C3E88D;"> -CA</span><span style="color:#C3E88D;"> ca.pem</span><span style="color:#C3E88D;"> -CAkey</span><span style="color:#C3E88D;"> ca.key</span><span style="color:#C3E88D;"> -CAcreateserial</span><span style="color:#C3E88D;"> -out</span><span style="color:#C3E88D;"> emqx.pem</span><span style="color:#C3E88D;"> -days</span><span style="color:#F78C6C;"> 3650</span><span style="color:#C3E88D;"> -sha256</span><span style="color:#C3E88D;"> -extensions</span><span style="color:#C3E88D;"> v3_req</span><span style="color:#C3E88D;"> -extfile</span><span style="color:#C3E88D;"> openssl.cnf</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><h4 id="éªŒè¯-emqx-å®ä½“è¯ä¹¦-ç¡®å®šè¯ä¹¦æ˜¯å¦æ­£ç¡®" tabindex="-1">éªŒè¯ EMQX å®ä½“è¯ä¹¦ï¼Œç¡®å®šè¯ä¹¦æ˜¯å¦æ­£ç¡®: <a class="header-anchor" href="#éªŒè¯-emqx-å®ä½“è¯ä¹¦-ç¡®å®šè¯ä¹¦æ˜¯å¦æ­£ç¡®" aria-label="Permalink to &quot;éªŒè¯ EMQX å®ä½“è¯ä¹¦ï¼Œç¡®å®šè¯ä¹¦æ˜¯å¦æ­£ç¡®:&quot;">â€‹</a></h4><div class="language-bash line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki material-theme-palenight vp-code" tabindex="0"><code><span class="line"><span style="color:#FFCB6B;">$</span><span style="color:#C3E88D;"> openssl</span><span style="color:#C3E88D;"> verify</span><span style="color:#C3E88D;"> -CAfile</span><span style="color:#C3E88D;"> ca.pem</span><span style="color:#C3E88D;"> emqx.pem</span></span>
<span class="line"><span style="color:#FFCB6B;">emqx.pem:</span><span style="color:#C3E88D;"> OK</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h3 id="ssl-tls-å¯ç”¨åŠéªŒè¯" tabindex="-1">SSL/TLS å¯ç”¨åŠéªŒè¯ <a class="header-anchor" href="#ssl-tls-å¯ç”¨åŠéªŒè¯" aria-label="Permalink to &quot;SSL/TLS å¯ç”¨åŠéªŒè¯&quot;">â€‹</a></h3><h4 id="åœ¨-emqx-ä¸­-mqtt-ssl-çš„é»˜è®¤ç›‘å¬ç«¯å£ä¸º-8883ã€‚emqx-é…ç½®å°†å‰æ–‡ä¸­é€šè¿‡-openssl-å·¥å…·ç”Ÿæˆçš„-emqx-pemã€emqx-key-åŠ-ca-pem-æ–‡ä»¶æ‹·è´åˆ°-emqx-çš„-etc-certs-ç›®å½•ä¸‹-å¹¶å‚è€ƒå¦‚ä¸‹é…ç½®ä¿®æ”¹-emqx-conf" tabindex="-1">åœ¨ EMQX ä¸­ mqtt:ssl çš„é»˜è®¤ç›‘å¬ç«¯å£ä¸º 8883ã€‚EMQX é…ç½®å°†å‰æ–‡ä¸­é€šè¿‡ OpenSSL å·¥å…·ç”Ÿæˆçš„ emqx.pemã€emqx.key åŠ ca.pem æ–‡ä»¶æ‹·è´åˆ° EMQX çš„ etc/certs/ ç›®å½•ä¸‹ï¼Œå¹¶å‚è€ƒå¦‚ä¸‹é…ç½®ä¿®æ”¹ emqx.confï¼š <a class="header-anchor" href="#åœ¨-emqx-ä¸­-mqtt-ssl-çš„é»˜è®¤ç›‘å¬ç«¯å£ä¸º-8883ã€‚emqx-é…ç½®å°†å‰æ–‡ä¸­é€šè¿‡-openssl-å·¥å…·ç”Ÿæˆçš„-emqx-pemã€emqx-key-åŠ-ca-pem-æ–‡ä»¶æ‹·è´åˆ°-emqx-çš„-etc-certs-ç›®å½•ä¸‹-å¹¶å‚è€ƒå¦‚ä¸‹é…ç½®ä¿®æ”¹-emqx-conf" aria-label="Permalink to &quot;åœ¨ EMQX ä¸­ mqtt:ssl çš„é»˜è®¤ç›‘å¬ç«¯å£ä¸º 8883ã€‚EMQX é…ç½®å°†å‰æ–‡ä¸­é€šè¿‡ OpenSSL å·¥å…·ç”Ÿæˆçš„ emqx.pemã€emqx.key åŠ ca.pem æ–‡ä»¶æ‹·è´åˆ° EMQX çš„ etc/certs/ ç›®å½•ä¸‹ï¼Œå¹¶å‚è€ƒå¦‚ä¸‹é…ç½®ä¿®æ”¹ emqx.confï¼š&quot;">â€‹</a></h4><div class="language-bash line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki material-theme-palenight vp-code" tabindex="0"><code><span class="line"><span style="color:#676E95;font-style:italic;">## listener.ssl.$name is the IP address and port that the MQTT/SSL</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">## Value: IP:Port | Port</span></span>
<span class="line"><span style="color:#FFCB6B;">listener.ssl.external</span><span style="color:#C3E88D;"> =</span><span style="color:#F78C6C;"> 8883</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">## Path to the file containing the user&#39;s private PEM-encoded key.</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">## Value: File</span></span>
<span class="line"><span style="color:#FFCB6B;">listener.ssl.external.keyfile</span><span style="color:#C3E88D;"> =</span><span style="color:#C3E88D;"> etc/certs/emqx.key</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">## æ³¨æ„ï¼šå¦‚æœ emqx.pem æ˜¯è¯ä¹¦é“¾ï¼Œè¯·ç¡®ä¿ç¬¬ä¸€ä¸ªè¯ä¹¦æ˜¯æœåŠ¡å™¨çš„è¯ä¹¦ï¼Œè€Œä¸æ˜¯ CA è¯ä¹¦ã€‚</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">## Path to a file containing the user certificate.</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">## Value: File</span></span>
<span class="line"><span style="color:#FFCB6B;">listener.ssl.external.certfile</span><span style="color:#C3E88D;"> =</span><span style="color:#C3E88D;"> etc/certs/emqx.pem</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">## æ³¨æ„ï¼šca.pem ç”¨äºä¿å­˜æœåŠ¡å™¨çš„ä¸­é—´ CA è¯ä¹¦å’Œæ ¹ CA è¯ä¹¦ã€‚å¯ä»¥é™„åŠ å…¶ä»–å—ä¿¡ä»»çš„ CAï¼Œç”¨æ¥è¿›è¡Œå®¢æˆ·ç«¯è¯ä¹¦éªŒè¯ã€‚</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">## Path to the file containing PEM-encoded CA certificates. The CA certificates</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">## Value: File</span></span>
<span class="line"><span style="color:#FFCB6B;">listener.ssl.external.cacertfile</span><span style="color:#C3E88D;"> =</span><span style="color:#C3E88D;"> etc/certs/ca.pem</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">## åŠ ä¸ŠåŒå‘éªŒè¯</span></span>
<span class="line"><span style="color:#FFCB6B;">listener.ssl.external.verify</span><span style="color:#C3E88D;"> =</span><span style="color:#C3E88D;"> verify_peer</span></span>
<span class="line"><span style="color:#FFCB6B;">listener.ssl.external.fail_if_no_peer_cert</span><span style="color:#C3E88D;"> =</span><span style="color:#89DDFF;"> true</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br></div></div><h4 id="å¦‚æœæ˜¯mqtt5ç‰ˆæœ¬-å‰é¢æ“ä½œéƒ½ä¸€æ ·-é…ç½®æ–‡ä»¶å¾—ä¿®æ”¹æˆå¦‚ä¸‹" tabindex="-1">å¦‚æœæ˜¯mqtt5ç‰ˆæœ¬ï¼Œå‰é¢æ“ä½œéƒ½ä¸€æ ·ï¼Œé…ç½®æ–‡ä»¶å¾—ä¿®æ”¹æˆå¦‚ä¸‹ <a class="header-anchor" href="#å¦‚æœæ˜¯mqtt5ç‰ˆæœ¬-å‰é¢æ“ä½œéƒ½ä¸€æ ·-é…ç½®æ–‡ä»¶å¾—ä¿®æ”¹æˆå¦‚ä¸‹" aria-label="Permalink to &quot;å¦‚æœæ˜¯mqtt5ç‰ˆæœ¬ï¼Œå‰é¢æ“ä½œéƒ½ä¸€æ ·ï¼Œé…ç½®æ–‡ä»¶å¾—ä¿®æ”¹æˆå¦‚ä¸‹&quot;">â€‹</a></h4><div class="language-bash line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki material-theme-palenight vp-code" tabindex="0"><code><span class="line"><span style="color:#FFCB6B;">listeners.ssl.default</span><span style="color:#C3E88D;"> {</span></span>
<span class="line"><span style="color:#FFCB6B;">  //ç«¯å£</span></span>
<span class="line"><span style="color:#FFCB6B;">  bind</span><span style="color:#C3E88D;"> =</span><span style="color:#89DDFF;"> &quot;</span><span style="color:#C3E88D;">0.0.0.0:8883</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#FFCB6B;">  //</span><span style="color:#C3E88D;"> æœ€å¤§è¿æ¥æ•°</span></span>
<span class="line"><span style="color:#FFCB6B;">  max_connections</span><span style="color:#C3E88D;"> =</span><span style="color:#F78C6C;"> 512000</span></span>
<span class="line"><span style="color:#FFCB6B;">  //</span><span style="color:#C3E88D;"> sslå‚æ•°</span></span>
<span class="line"><span style="color:#FFCB6B;">  ssl_options</span><span style="color:#C3E88D;"> {</span></span>
<span class="line"><span style="color:#FFCB6B;">    keyfile</span><span style="color:#C3E88D;"> =</span><span style="color:#89DDFF;"> &quot;</span><span style="color:#C3E88D;">/etc/emqx/certs/emqx.key</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#FFCB6B;">    certfile</span><span style="color:#C3E88D;"> =</span><span style="color:#89DDFF;"> &quot;</span><span style="color:#C3E88D;">/etc/emqx/certs/emqx.pem</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#FFCB6B;">    cacertfile</span><span style="color:#C3E88D;"> =</span><span style="color:#89DDFF;"> &quot;</span><span style="color:#C3E88D;">/etc/emqx/certs/ca.pem</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#FFCB6B;">    verify</span><span style="color:#C3E88D;"> =</span><span style="color:#C3E88D;"> verify_peer</span></span>
<span class="line"><span style="color:#FFCB6B;">    fail_if_no_peer_cert</span><span style="color:#C3E88D;"> =</span><span style="color:#89DDFF;"> true</span></span>
<span class="line"><span style="color:#BABED8;">  }</span></span>
<span class="line"><span style="color:#BABED8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div>`,27),r=[o];function t(c,i,y,m,b,C){return n(),a("div",null,r)}const D=s(p,[["render",t]]);export{u as __pageData,D as default};
