import{_ as s,c as n,o as a,a4 as e}from"./chunks/framework.CCJHkvW2.js";const y=JSON.parse('{"title":"VNC 使用","description":"","frontmatter":{},"headers":[],"relativePath":"linux/vnc.md","filePath":"linux/vnc.md","lastUpdated":1714021425000}'),l={name:"linux/vnc.md"},p=e(`<h1 id="vnc-使用" tabindex="-1">VNC 使用 <a class="header-anchor" href="#vnc-使用" aria-label="Permalink to &quot;VNC 使用&quot;">​</a></h1><p>参考文献(<a href="https://blog.csdn.net/qq_63320529/article/details/134506820" target="_blank" rel="noreferrer">https://blog.csdn.net/qq_63320529/article/details/134506820</a>)</p><div class="language-shell line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-palenight vp-code" tabindex="0"><code><span class="line"><span style="color:#FFCB6B;">sudo</span><span style="color:#C3E88D;"> apt</span><span style="color:#C3E88D;"> update</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><div class="language-shell line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-palenight vp-code" tabindex="0"><code><span class="line"><span style="color:#FFCB6B;">sudo</span><span style="color:#C3E88D;"> apt-get</span><span style="color:#C3E88D;"> install</span><span style="color:#C3E88D;"> x11vnc</span><span style="color:#C3E88D;"> -y</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><div class="language-shell line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-palenight vp-code" tabindex="0"><code><span class="line"><span style="color:#FFCB6B;">sudo</span><span style="color:#C3E88D;"> apt-get</span><span style="color:#C3E88D;"> install</span><span style="color:#C3E88D;"> lightdm</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><div class="language-shell line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-palenight vp-code" tabindex="0"><code><span class="line"><span style="color:#FFCB6B;">sudo</span><span style="color:#C3E88D;"> x11vnc</span><span style="color:#C3E88D;"> -storepasswd</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>Enter VNC password:</p><p>Zhangling@</p><p>Write password to /home/green/.vnc/passwd? [y]/n y</p><p>Password written to: /home/green/.vnc/passwd</p><div class="language-shell line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-palenight vp-code" tabindex="0"><code><span class="line"><span style="color:#FFCB6B;">sudo</span><span style="color:#C3E88D;"> vi</span><span style="color:#C3E88D;"> /etc/systemd/system/x11vnc.service</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><div class="language-shell line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-palenight vp-code" tabindex="0"><code><span class="line"><span style="color:#89DDFF;">[</span><span style="color:#BABED8;">Unit</span><span style="color:#89DDFF;">]</span></span>
<span class="line"><span style="color:#BABED8;">Description</span><span style="color:#89DDFF;">=</span><span style="color:#C3E88D;">Start</span><span style="color:#FFCB6B;"> x11vnc</span><span style="color:#C3E88D;"> at</span><span style="color:#C3E88D;"> startup.</span></span>
<span class="line"><span style="color:#BABED8;">After</span><span style="color:#89DDFF;">=</span><span style="color:#C3E88D;">multi-user.target</span></span>
<span class="line"><span style="color:#BABED8;"> </span></span>
<span class="line"><span style="color:#89DDFF;">[</span><span style="color:#BABED8;">Service</span><span style="color:#89DDFF;">]</span></span>
<span class="line"><span style="color:#BABED8;">Type</span><span style="color:#89DDFF;">=</span><span style="color:#C3E88D;">simple</span></span>
<span class="line"><span style="color:#BABED8;">ExecStart</span><span style="color:#89DDFF;">=</span><span style="color:#C3E88D;">/usr/bin/x11vnc</span><span style="color:#FFCB6B;"> -auth</span><span style="color:#C3E88D;"> guess</span><span style="color:#C3E88D;"> -forever</span><span style="color:#C3E88D;"> -loop</span><span style="color:#C3E88D;"> -noxdamage</span><span style="color:#C3E88D;"> -repeat</span><span style="color:#C3E88D;"> -rfbauth</span><span style="color:#C3E88D;"> /home/green/.vnc/passwd</span><span style="color:#C3E88D;"> -rfbport</span><span style="color:#F78C6C;"> 5900</span><span style="color:#C3E88D;"> -shared</span></span>
<span class="line"><span style="color:#BABED8;"> </span></span>
<span class="line"><span style="color:#89DDFF;">[</span><span style="color:#BABED8;">Install</span><span style="color:#89DDFF;">]</span></span>
<span class="line"><span style="color:#BABED8;">WantedBy</span><span style="color:#89DDFF;">=</span><span style="color:#C3E88D;">multi-user.target</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p>[Unit] Description=Start x11vnc at startup. After=multi-user.target [Service] Type=simple ExecStart=/usr/bin/x11vnc -auth /run/user/1000/gdm/Xauthority -forever -loop -noxdamage -repeat -rfbauth /home/green/.vnc/passwd -rfbport 5900 -shared [Install] WantedBy=multi-user.target</p><div class="language-shell line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-palenight vp-code" tabindex="0"><code><span class="line"><span style="color:#FFCB6B;">sudo</span><span style="color:#C3E88D;"> systemctl</span><span style="color:#C3E88D;"> enable</span><span style="color:#C3E88D;"> x11vnc.service</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>Created symlink /etc/systemd/system/multi-user.target.wants/x11vnc.service → /etc/systemd/system/x11vnc.service.</p><div class="language-shell line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-palenight vp-code" tabindex="0"><code><span class="line"><span style="color:#FFCB6B;">sudo</span><span style="color:#C3E88D;"> systemctl</span><span style="color:#C3E88D;"> start</span><span style="color:#C3E88D;"> x11vnc.service</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><div class="language-shell line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-palenight vp-code" tabindex="0"><code><span class="line"><span style="color:#FFCB6B;">systemctl</span><span style="color:#C3E88D;"> status</span><span style="color:#C3E88D;"> x11vnc</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><div class="language-text line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">text</span><pre class="shiki material-theme-palenight vp-code" tabindex="0"><code><span class="line"><span>x11vnc.service - Start x11vnc at startup.</span></span>
<span class="line"><span>     Loaded: loaded (/etc/systemd/system/x11vnc.service; enabled; vendor preset: enabled)</span></span>
<span class="line"><span>     Active: active (running) since Tue 2024-04-23 13:42:51 CST; 5s ago</span></span>
<span class="line"><span>   Main PID: 32419 (x11vnc)</span></span>
<span class="line"><span>      Tasks: 1 (limit: 76972)</span></span>
<span class="line"><span>     Memory: 1.8M</span></span>
<span class="line"><span>        CPU: 208ms</span></span>
<span class="line"><span>     CGroup: /system.slice/x11vnc.service</span></span>
<span class="line"><span>             └─32419 /usr/bin/x11vnc -auth guess -forever -loop -noxdamage -repeat -rfbauth /home/green/.vnc/passwd -rfbport 5900 -shared</span></span>
<span class="line"><span></span></span>
<span class="line"><span>4月 23 13:42:56 green-Standard-PC-i440FX-PIIX-1996 x11vnc[32421]: Xlib:  extension &quot;DPMS&quot; missing on display &quot;:0&quot;.</span></span>
<span class="line"><span>4月 23 13:42:56 green-Standard-PC-i440FX-PIIX-1996 x11vnc[32421]: 23/04/2024 13:42:56 X display is not capable of DPMS.</span></span>
<span class="line"><span>4月 23 13:42:56 green-Standard-PC-i440FX-PIIX-1996 x11vnc[32421]: 23/04/2024 13:42:56 --------------------------------------------------------</span></span>
<span class="line"><span>4月 23 13:42:56 green-Standard-PC-i440FX-PIIX-1996 x11vnc[32421]: 23/04/2024 13:42:56</span></span>
<span class="line"><span>4月 23 13:42:56 green-Standard-PC-i440FX-PIIX-1996 x11vnc[32421]: 23/04/2024 13:42:56 Default visual ID: 0x23</span></span>
<span class="line"><span>4月 23 13:42:56 green-Standard-PC-i440FX-PIIX-1996 x11vnc[32421]: X Error of failed request:  BadMatch (invalid parameter attributes)</span></span>
<span class="line"><span>4月 23 13:42:56 green-Standard-PC-i440FX-PIIX-1996 x11vnc[32421]:   Major opcode of failed request:  73 (X_GetImage)</span></span>
<span class="line"><span>4月 23 13:42:56 green-Standard-PC-i440FX-PIIX-1996 x11vnc[32421]:   Serial number of failed request:  46</span></span>
<span class="line"><span>4月 23 13:42:56 green-Standard-PC-i440FX-PIIX-1996 x11vnc[32421]:   Current serial number in output stream:  46</span></span>
<span class="line"><span>4月 23 13:42:56 green-Standard-PC-i440FX-PIIX-1996 x11vnc[32419]:  --- x11vnc loop: sleeping 2000 ms ---</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br></div></div>`,18),r=[p];function t(c,o,i,d,u,b){return a(),n("div",null,r)}const v=s(l,[["render",t]]);export{y as __pageData,v as default};
