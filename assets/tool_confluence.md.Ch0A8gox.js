import{_ as e,c as a,o as s,a4 as n}from"./chunks/framework.CCJHkvW2.js";const v=JSON.parse('{"title":"docker 安裝confluence","description":"","frontmatter":{},"headers":[],"relativePath":"tool/confluence.md","filePath":"tool/confluence.md","lastUpdated":1707190539000}'),l={name:"tool/confluence.md"},c=n('<h1 id="docker-安裝confluence" tabindex="-1">docker 安裝confluence <a class="header-anchor" href="#docker-安裝confluence" aria-label="Permalink to &quot;docker 安裝confluence&quot;">​</a></h1><div class="language- line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki material-theme-palenight vp-code" tabindex="0"><code><span class="line"><span>docker pull atlassian/confluence-server</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><div class="language- line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki material-theme-palenight vp-code" tabindex="0"><code><span class="line"><span>docker run -d -v /opt/confluence:/var/atlassian/application-data/confluence -v /etc/localtime:/etc/localtime --name=&quot;confluence&quot; -p 8090:8090 -p 8091:8091 atlassian/confluence-server</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><div class="tip custom-block"><p class="custom-block-title">confluence破解</p><p>1.破解工具地址：<a href="https://files.cnblogs.com/files/tchua/key-Confluence.rar" target="_blank" rel="noreferrer">https://files.cnblogs.com/files/tchua/key-Confluence.rar</a></p><p>2.考出atlassian-extras-decoder-v2-3.4.1.jar文件，并修改名称为atlassian-extras-2.4.jar：docker cp confluence:/opt/atlassian/confluence/confluence/WEB-INF/lib/atlassian-extras-decoder-v2-3.4.1.jar /tmp/atlassian-extras-2.4.jar</p><p>3.atlassian-extras-2.4.jar放入破解工具的根目录下</p><p>4.执行破解工具，并生成key</p><p>5.破解工具目录下会更新atlassian-extras-2.4.jar文件，然后考去atlassian-extras-2.4.jar文件到服务器，并修改名称为atlassian-extras-decoder-v2-3.4.1.jar文件（步骤2的逆过程）</p></div><p>下载mysql驱动 （mysql驱动下载地址：<a href="https://dev.mysql.com/downloads/connector/j/5.1.html%EF%BC%89" target="_blank" rel="noreferrer">https://dev.mysql.com/downloads/connector/j/5.1.html）</a></p><div class="language- line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki material-theme-palenight vp-code" tabindex="0"><code><span class="line"><span>docker cp mysql-connector-java-5.1.47.jar confluence:/opt/atlassian/confluence/confluence/WEB-INF/lib/</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>方式1</p><div class="tip custom-block"><p class="custom-block-title">修改mysql数据库的隔离级别</p><div class="language- line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki material-theme-palenight vp-code" tabindex="0"><code><span class="line"><span>mysql -u root -p</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><div class="language- line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki material-theme-palenight vp-code" tabindex="0"><code><span class="line"><span>SET GLOBAL transaction_isolation=&#39;READ-COMMITTED&#39;;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>或者</p><div class="language- line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki material-theme-palenight vp-code" tabindex="0"><code><span class="line"><span>SET GLOBAL TRANSACTION ISOLATION LEVEL READ COMMITTED;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>或者</p><div class="language- line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki material-theme-palenight vp-code" tabindex="0"><code><span class="line"><span>SET GLOBAL tx_isolation=&#39;READ-COMMITTED&#39;;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div></div><p>方式2</p><div class="tip custom-block"><p class="custom-block-title">修改mysql数据库的隔离级别</p><div class="language- line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki material-theme-palenight vp-code" tabindex="0"><code><span class="line"><span>vim /var/atlassian/application-data/confluence/confluence.cfg.xml</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><div class="language- line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki material-theme-palenight vp-code" tabindex="0"><code><span class="line"><span>jdbc:mysql://127.0.0.1:3306/confluence?useUnicode=true&amp;characterEncoding=UTF-8&amp;useSSL=false&amp;sessionVariables=tx_isolation=&#39;READ-COMMITTED&#39;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>启动confluence</p><div class="language- line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki material-theme-palenight vp-code" tabindex="0"><code><span class="line"><span>sh ./install.sh</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>重启conflucence</p><div class="language- line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki material-theme-palenight vp-code" tabindex="0"><code><span class="line"><span>docker-compose stop   docker-compose up -d</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div></div>',10),p=[c];function i(t,o,r,d,u,m){return s(),a("div",null,p)}const h=e(l,[["render",i]]);export{v as __pageData,h as default};
