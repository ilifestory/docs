import{_ as s,c as n,o as a,a4 as l}from"./chunks/framework.CCJHkvW2.js";const D=JSON.parse('{"title":"docker安装minio","description":"","frontmatter":{},"headers":[],"relativePath":"tool/minio.md","filePath":"tool/minio.md","lastUpdated":1715332530000}'),e={name:"tool/minio.md"},p=l(`<h1 id="docker安装minio" tabindex="-1">docker安装minio <a class="header-anchor" href="#docker安装minio" aria-label="Permalink to &quot;docker安装minio&quot;">​</a></h1><p>参考文献(<a href="https://blog.csdn.net/zhaosongbin/article/details/136174810" target="_blank" rel="noreferrer">https://blog.csdn.net/zhaosongbin/article/details/136174810</a>)(<a href="https://juejin.cn/post/7205043254373711930" target="_blank" rel="noreferrer">https://juejin.cn/post/7205043254373711930</a>)</p><h2 id="拉取minio镜像" tabindex="-1">拉取minio镜像 <a class="header-anchor" href="#拉取minio镜像" aria-label="Permalink to &quot;拉取minio镜像&quot;">​</a></h2><div class="language-shell line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-palenight vp-code" tabindex="0"><code><span class="line"><span style="color:#FFCB6B;">docker</span><span style="color:#C3E88D;"> pull</span><span style="color:#C3E88D;"> minio/minio:latest</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><h2 id="创建-miniobridge-docker桥接网络" tabindex="-1">创建 miniobridge docker桥接网络 <a class="header-anchor" href="#创建-miniobridge-docker桥接网络" aria-label="Permalink to &quot;创建 miniobridge docker桥接网络&quot;">​</a></h2><div class="language-shell line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-palenight vp-code" tabindex="0"><code><span class="line"><span style="color:#FFCB6B;">docker</span><span style="color:#C3E88D;"> network</span><span style="color:#C3E88D;"> create</span><span style="color:#C3E88D;"> --driver</span><span style="color:#C3E88D;"> bridge</span><span style="color:#C3E88D;"> --subnet=172.18.0.0/24</span><span style="color:#C3E88D;"> --gateway=172.18.0.1</span><span style="color:#C3E88D;"> miniobridge</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><div class="tip custom-block"><p class="custom-block-title">TIP</p><p>--driver bridge 可以简写 -d bridge</p></div><h2 id="安装minio" tabindex="-1">安装minio <a class="header-anchor" href="#安装minio" aria-label="Permalink to &quot;安装minio&quot;">​</a></h2><p>安装节点1</p><div class="language-shell line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-palenight vp-code" tabindex="0"><code><span class="line"><span style="color:#FFCB6B;">docker</span><span style="color:#C3E88D;"> run</span><span style="color:#C3E88D;"> -d</span><span style="color:#C3E88D;"> -p</span><span style="color:#C3E88D;"> 7001:9000</span><span style="color:#C3E88D;"> -p</span><span style="color:#C3E88D;"> 6001:9001</span><span style="color:#C3E88D;"> --name</span><span style="color:#C3E88D;"> minio1</span><span style="color:#C3E88D;"> --network</span><span style="color:#C3E88D;"> miniobridge</span><span style="color:#C3E88D;"> --restart=always</span><span style="color:#C3E88D;"> -e</span><span style="color:#89DDFF;"> &quot;</span><span style="color:#C3E88D;">MINIO_ROOT_USER=minioadmin</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;"> -e</span><span style="color:#89DDFF;"> &quot;</span><span style="color:#C3E88D;">MINIO_ROOT_PASSWORD=minioadmin</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;"> -v</span><span style="color:#C3E88D;"> /docker/minio/minio1/data1:/minio/data1</span><span style="color:#C3E88D;"> -v</span><span style="color:#C3E88D;"> /docker/minio/minio1/data2:/minio/data2</span><span style="color:#C3E88D;"> -v</span><span style="color:#C3E88D;"> /docker/minio/minio1/data3:/minio/data3</span><span style="color:#C3E88D;"> -v</span><span style="color:#C3E88D;"> /docker/minio/minio1/data4:/minio/data4</span><span style="color:#C3E88D;"> -v</span><span style="color:#C3E88D;"> /docker/minio/minio1/config:/root/.minio</span><span style="color:#C3E88D;"> minio/minio:latest</span><span style="color:#C3E88D;"> server</span><span style="color:#C3E88D;"> http://minio1/minio/data{1...4}</span><span style="color:#C3E88D;"> http://minio2/minio/data{1...4}</span><span style="color:#C3E88D;"> --console-address</span><span style="color:#89DDFF;"> &quot;</span><span style="color:#C3E88D;">:9001</span><span style="color:#89DDFF;">&quot;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>安装节点2</p><div class="language-shell line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-palenight vp-code" tabindex="0"><code><span class="line"><span style="color:#FFCB6B;">docker</span><span style="color:#C3E88D;"> run</span><span style="color:#C3E88D;"> -d</span><span style="color:#C3E88D;"> -p</span><span style="color:#C3E88D;"> 7002:9000</span><span style="color:#C3E88D;"> -p</span><span style="color:#C3E88D;"> 6002:9001</span><span style="color:#C3E88D;"> --name</span><span style="color:#C3E88D;"> minio2</span><span style="color:#C3E88D;"> --network</span><span style="color:#C3E88D;"> miniobridge</span><span style="color:#C3E88D;"> --restart=always</span><span style="color:#C3E88D;"> -e</span><span style="color:#89DDFF;"> &quot;</span><span style="color:#C3E88D;">MINIO_ROOT_USER=minioadmin</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;"> -e</span><span style="color:#89DDFF;"> &quot;</span><span style="color:#C3E88D;">MINIO_ROOT_PASSWORD=minioadmin</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;"> -v</span><span style="color:#C3E88D;"> /docker/minio/minio2/data1:/minio/data1</span><span style="color:#C3E88D;"> -v</span><span style="color:#C3E88D;"> /docker/minio/minio2/data2:/minio/data2</span><span style="color:#C3E88D;"> -v</span><span style="color:#C3E88D;"> /docker/minio/minio2/data3:/minio/data3</span><span style="color:#C3E88D;"> -v</span><span style="color:#C3E88D;"> /docker/minio/minio2/data4:/minio/data4</span><span style="color:#C3E88D;"> -v</span><span style="color:#C3E88D;"> /docker/minio/minio2/config:/root/.minio</span><span style="color:#C3E88D;"> minio/minio:latest</span><span style="color:#C3E88D;"> server</span><span style="color:#C3E88D;"> http://minio1/minio/data{1...4}</span><span style="color:#C3E88D;"> http://minio2/minio/data{1...4}</span><span style="color:#C3E88D;"> --console-address</span><span style="color:#89DDFF;"> &quot;</span><span style="color:#C3E88D;">:9001</span><span style="color:#89DDFF;">&quot;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>另一个集区测试</p><div class="language-shell line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-palenight vp-code" tabindex="0"><code><span class="line"><span style="color:#FFCB6B;">docker</span><span style="color:#C3E88D;"> run</span><span style="color:#C3E88D;"> -d</span><span style="color:#C3E88D;"> -p</span><span style="color:#C3E88D;"> 7003:9000</span><span style="color:#C3E88D;"> -p</span><span style="color:#C3E88D;"> 6003:9001</span><span style="color:#C3E88D;"> --name</span><span style="color:#C3E88D;"> minio3</span><span style="color:#C3E88D;"> --network</span><span style="color:#C3E88D;"> miniobridge</span><span style="color:#C3E88D;"> --restart=always</span><span style="color:#C3E88D;"> -e</span><span style="color:#89DDFF;"> &quot;</span><span style="color:#C3E88D;">MINIO_ROOT_USER=minioadmin</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;"> -e</span><span style="color:#89DDFF;"> &quot;</span><span style="color:#C3E88D;">MINIO_ROOT_PASSWORD=minioadmin</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;"> -v</span><span style="color:#C3E88D;"> /nfs-minio/minio3/data1:/minio/data1</span><span style="color:#C3E88D;"> -v</span><span style="color:#C3E88D;"> /nfs-minio/minio3/data2:/minio/data2</span><span style="color:#C3E88D;"> -v</span><span style="color:#C3E88D;"> /nfs-minio/minio3/data3:/minio/data3</span><span style="color:#C3E88D;"> -v</span><span style="color:#C3E88D;"> /nfs-minio/minio3/data4:/minio/data4</span><span style="color:#C3E88D;"> -v</span><span style="color:#C3E88D;"> /nfs-minio/minio3/config:/root/.minio</span><span style="color:#C3E88D;"> minio/minio:latest</span><span style="color:#C3E88D;"> server</span><span style="color:#C3E88D;"> http://minio3/minio/data{1...4}</span><span style="color:#C3E88D;"> http://minio4/minio/data{1...4}</span><span style="color:#C3E88D;"> --console-address</span><span style="color:#89DDFF;"> &quot;</span><span style="color:#C3E88D;">:9001</span><span style="color:#89DDFF;">&quot;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><div class="language-shell line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-palenight vp-code" tabindex="0"><code><span class="line"><span style="color:#FFCB6B;">docker</span><span style="color:#C3E88D;"> run</span><span style="color:#C3E88D;"> -d</span><span style="color:#C3E88D;"> -p</span><span style="color:#C3E88D;"> 7004:9000</span><span style="color:#C3E88D;"> -p</span><span style="color:#C3E88D;"> 6004:9001</span><span style="color:#C3E88D;"> --name</span><span style="color:#C3E88D;"> minio4</span><span style="color:#C3E88D;"> --network</span><span style="color:#C3E88D;"> miniobridge</span><span style="color:#C3E88D;"> --restart=always</span><span style="color:#C3E88D;"> -e</span><span style="color:#89DDFF;"> &quot;</span><span style="color:#C3E88D;">MINIO_ROOT_USER=minioadmin</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;"> -e</span><span style="color:#89DDFF;"> &quot;</span><span style="color:#C3E88D;">MINIO_ROOT_PASSWORD=minioadmin</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;"> -v</span><span style="color:#C3E88D;"> /nfs-minio/minio4/data1:/minio/data1</span><span style="color:#C3E88D;"> -v</span><span style="color:#C3E88D;"> /nfs-minio/minio4/data2:/minio/data2</span><span style="color:#C3E88D;"> -v</span><span style="color:#C3E88D;"> /nfs-minio/minio4/data3:/minio/data3</span><span style="color:#C3E88D;"> -v</span><span style="color:#C3E88D;"> /nfs-minio/minio4/data4:/minio/data4</span><span style="color:#C3E88D;"> -v</span><span style="color:#C3E88D;"> /nfs-minio/minio4/config:/root/.minio</span><span style="color:#C3E88D;"> minio/minio:latest</span><span style="color:#C3E88D;"> server</span><span style="color:#C3E88D;"> http://minio3/minio/data{1...4}</span><span style="color:#C3E88D;"> http://minio4/minio/data{1...4}</span><span style="color:#C3E88D;"> --console-address</span><span style="color:#89DDFF;"> &quot;</span><span style="color:#C3E88D;">:9001</span><span style="color:#89DDFF;">&quot;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><h2 id="nginx-配置" tabindex="-1">nginx 配置 <a class="header-anchor" href="#nginx-配置" aria-label="Permalink to &quot;nginx 配置&quot;">​</a></h2><div class="tip custom-block"><p class="custom-block-title">端口说明</p><p>7000端口: 数据层访问入口</p><p>7001端口: 节点1数据层入口</p><p>7002端口: 节点2数据层入口</p></div><p>数据层负载均衡</p><div class="language-shell line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-palenight vp-code" tabindex="0"><code><span class="line"><span style="color:#676E95;font-style:italic;">    # 配置负载均衡</span></span>
<span class="line"><span style="color:#FFCB6B;">upstream</span><span style="color:#C3E88D;"> minio</span><span style="color:#C3E88D;"> {</span></span>
<span class="line"><span style="color:#FFCB6B;">    server</span><span style="color:#C3E88D;"> 172.26.25.16:7001</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#FFCB6B;">    server</span><span style="color:#C3E88D;"> 172.26.25.16:7002</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#BABED8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><div class="language-shell line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-palenight vp-code" tabindex="0"><code><span class="line"><span style="color:#BABED8;"> </span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># 新添加配置</span></span>
<span class="line"><span style="color:#FFCB6B;">server</span><span style="color:#C3E88D;"> {</span></span>
<span class="line"><span style="color:#FFCB6B;">    listen</span><span style="color:#F78C6C;">       7000</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#FFCB6B;">    listen</span><span style="color:#BABED8;">  [::]:7000</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#FFCB6B;">    server_name</span><span style="color:#C3E88D;">  localhost</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#BABED8;"> </span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">    # To allow special characters in headers</span></span>
<span class="line"><span style="color:#FFCB6B;">    ignore_invalid_headers</span><span style="color:#C3E88D;"> off</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">    # Allow any size file to be uploaded.</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">    # Set to a value such as 1000m; to restrict file size to a specific value</span></span>
<span class="line"><span style="color:#FFCB6B;">    client_max_body_size</span><span style="color:#F78C6C;"> 0</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">    # To disable buffering</span></span>
<span class="line"><span style="color:#FFCB6B;">    proxy_buffering</span><span style="color:#C3E88D;"> off</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#FFCB6B;">    proxy_request_buffering</span><span style="color:#C3E88D;"> off</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#BABED8;"> </span></span>
<span class="line"><span style="color:#FFCB6B;">    location</span><span style="color:#C3E88D;"> /</span><span style="color:#C3E88D;"> {</span></span>
<span class="line"><span style="color:#FFCB6B;">        proxy_set_header</span><span style="color:#C3E88D;"> Host</span><span style="color:#BABED8;"> $http_host</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#FFCB6B;">        proxy_set_header</span><span style="color:#C3E88D;"> X-Real-IP</span><span style="color:#BABED8;"> $remote_addr</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#FFCB6B;">        proxy_set_header</span><span style="color:#C3E88D;"> X-Forwarded-For</span><span style="color:#BABED8;"> $proxy_add_x_forwarded_for</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#FFCB6B;">        proxy_set_header</span><span style="color:#C3E88D;"> X-Forwarded-Proto</span><span style="color:#BABED8;"> $scheme</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#BABED8;"> </span></span>
<span class="line"><span style="color:#FFCB6B;">        proxy_connect_timeout</span><span style="color:#F78C6C;"> 300</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">        # Default is HTTP/1, keepalive is only enabled in HTTP/1.1</span></span>
<span class="line"><span style="color:#FFCB6B;">        proxy_http_version</span><span style="color:#F78C6C;"> 1.1</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#FFCB6B;">        proxy_set_header</span><span style="color:#C3E88D;"> Connection</span><span style="color:#89DDFF;"> &quot;&quot;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#FFCB6B;">        chunked_transfer_encoding</span><span style="color:#C3E88D;"> off</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#BABED8;">        </span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">        # 设置代理</span></span>
<span class="line"><span style="color:#FFCB6B;">        proxy_pass</span><span style="color:#C3E88D;"> http://minio</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#BABED8;">    }</span></span>
<span class="line"><span style="color:#BABED8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br></div></div><p>控制层负载均衡</p><div class="tip custom-block"><p class="custom-block-title">端口说明</p><p>6000端口: 控制层访问入口</p><p>6001端口: 节点1控制层入口</p><p>6002端口: 节点2控制层入口</p></div><div class="language-shell line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-palenight vp-code" tabindex="0"><code><span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">    # 配置负载均衡</span></span>
<span class="line"><span style="color:#FFCB6B;">upstream</span><span style="color:#C3E88D;"> minioconsole</span><span style="color:#C3E88D;"> {</span></span>
<span class="line"><span style="color:#FFCB6B;">    server</span><span style="color:#C3E88D;"> 172.26.25.16:6001</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#FFCB6B;">    server</span><span style="color:#C3E88D;"> 172.26.25.16:6002</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#BABED8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><div class="language-shell line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-palenight vp-code" tabindex="0"><code><span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># 新添加配置</span></span>
<span class="line"><span style="color:#FFCB6B;">server</span><span style="color:#C3E88D;"> {</span></span>
<span class="line"><span style="color:#FFCB6B;">    listen</span><span style="color:#F78C6C;">       6000</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#FFCB6B;">    listen</span><span style="color:#BABED8;">  [::]:6000</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#FFCB6B;">    server_name</span><span style="color:#C3E88D;">  localhost</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#BABED8;"> </span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">    # To allow special characters in headers</span></span>
<span class="line"><span style="color:#FFCB6B;">    ignore_invalid_headers</span><span style="color:#C3E88D;"> off</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">    # Allow any size file to be uploaded.</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">    # Set to a value such as 1000m; to restrict file size to a specific value</span></span>
<span class="line"><span style="color:#FFCB6B;">    client_max_body_size</span><span style="color:#F78C6C;"> 0</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">    # To disable buffering</span></span>
<span class="line"><span style="color:#FFCB6B;">    proxy_buffering</span><span style="color:#C3E88D;"> off</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#FFCB6B;">    proxy_request_buffering</span><span style="color:#C3E88D;"> off</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#BABED8;"> </span></span>
<span class="line"><span style="color:#FFCB6B;">    location</span><span style="color:#C3E88D;"> /</span><span style="color:#C3E88D;"> {</span></span>
<span class="line"><span style="color:#FFCB6B;">        proxy_set_header</span><span style="color:#C3E88D;"> Host</span><span style="color:#BABED8;"> $http_host</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#FFCB6B;">        proxy_set_header</span><span style="color:#C3E88D;"> X-Real-IP</span><span style="color:#BABED8;"> $remote_addr</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#FFCB6B;">        proxy_set_header</span><span style="color:#C3E88D;"> X-Forwarded-For</span><span style="color:#BABED8;"> $proxy_add_x_forwarded_for</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#FFCB6B;">        proxy_set_header</span><span style="color:#C3E88D;"> X-Forwarded-Proto</span><span style="color:#BABED8;"> $scheme</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#BABED8;"> </span></span>
<span class="line"><span style="color:#FFCB6B;">        proxy_connect_timeout</span><span style="color:#F78C6C;"> 300</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">        # Default is HTTP/1, keepalive is only enabled in HTTP/1.1</span></span>
<span class="line"><span style="color:#FFCB6B;">        proxy_http_version</span><span style="color:#F78C6C;"> 1.1</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#FFCB6B;">        proxy_set_header</span><span style="color:#C3E88D;"> Connection</span><span style="color:#89DDFF;"> &quot;&quot;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#FFCB6B;">        chunked_transfer_encoding</span><span style="color:#C3E88D;"> off</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#BABED8;">        </span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">        # 设置代理</span></span>
<span class="line"><span style="color:#FFCB6B;">        proxy_pass</span><span style="color:#C3E88D;"> http://minioconsole</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#BABED8;">    }</span></span>
<span class="line"><span style="color:#BABED8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br></div></div><h2 id="minio-client迁移数据" tabindex="-1">Minio Client迁移数据 <a class="header-anchor" href="#minio-client迁移数据" aria-label="Permalink to &quot;Minio Client迁移数据&quot;">​</a></h2><p>1、概要</p><p>Minio Server + Minio Client 实现minio 不同集群之间的数据迁移、数据备份</p><p>2、mc安装</p><div class="language-shell line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-palenight vp-code" tabindex="0"><code><span class="line"><span style="color:#FFCB6B;">curl</span><span style="color:#C3E88D;"> https://dl.min.io/client/mc/release/linux-amd64/mc</span><span style="color:#C3E88D;"> --create-dirs</span><span style="color:#C3E88D;"> -o</span><span style="color:#BABED8;"> $HOME</span><span style="color:#C3E88D;">/minio-binaries/mc</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><div class="language-shell line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-palenight vp-code" tabindex="0"><code><span class="line"><span style="color:#FFCB6B;">chmod</span><span style="color:#C3E88D;"> +x</span><span style="color:#BABED8;"> $HOME</span><span style="color:#C3E88D;">/minio-binaries/mc</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><div class="language-shell line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-palenight vp-code" tabindex="0"><code><span class="line"><span style="color:#C792EA;">export</span><span style="color:#BABED8;"> PATH</span><span style="color:#89DDFF;">=</span><span style="color:#BABED8;">$PATH:$HOME/minio-binaries/</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>测试</p><div class="language-shell line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-palenight vp-code" tabindex="0"><code><span class="line"><span style="color:#FFCB6B;">mc</span><span style="color:#C3E88D;"> --help</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><div class="language-bash line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki material-theme-palenight vp-code" tabindex="0"><code><span class="line"><span style="color:#FFCB6B;">───────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────</span><span style="color:#BABED8;"> (q)uit/esc</span></span>
<span class="line"><span style="color:#FFCB6B;">NAME:</span><span style="color:#BABED8;">                                                                           </span></span>
<span class="line"><span style="color:#FFCB6B;">  mc</span><span style="color:#C3E88D;"> -</span><span style="color:#C3E88D;"> MinIO</span><span style="color:#C3E88D;"> Client</span><span style="color:#C3E88D;"> for</span><span style="color:#C3E88D;"> object</span><span style="color:#C3E88D;"> storage</span><span style="color:#C3E88D;"> and</span><span style="color:#C3E88D;"> filesystems.</span><span style="color:#BABED8;">                         </span></span>
<span class="line"><span style="color:#BABED8;">                                                                                </span></span>
<span class="line"><span style="color:#FFCB6B;">USAGE:</span><span style="color:#BABED8;">                                                                          </span></span>
<span class="line"><span style="color:#FFCB6B;">  mc</span><span style="color:#BABED8;"> [FLAGS] COMMAND </span><span style="color:#89DDFF;">[</span><span style="color:#BABED8;">COMMAND FLAGS </span><span style="color:#89DDFF;">|</span><span style="color:#89DDFF;"> -h]</span><span style="color:#89DDFF;"> [</span><span style="color:#BABED8;">ARGUMENTS...</span><span style="color:#89DDFF;">]</span><span style="color:#BABED8;">                        </span></span>
<span class="line"><span style="color:#BABED8;">                                                                                </span></span>
<span class="line"><span style="color:#FFCB6B;">COMMANDS:</span><span style="color:#BABED8;">                                                                       </span></span>
<span class="line"><span style="color:#82AAFF;">  alias</span><span style="color:#C3E88D;">      manage</span><span style="color:#C3E88D;"> server</span><span style="color:#C3E88D;"> credentials</span><span style="color:#C3E88D;"> in</span><span style="color:#C3E88D;"> configuration</span><span style="color:#C3E88D;"> file</span><span style="color:#BABED8;">                    </span></span>
<span class="line"><span style="color:#FFCB6B;">  admin</span><span style="color:#C3E88D;">      manage</span><span style="color:#C3E88D;"> MinIO</span><span style="color:#C3E88D;"> servers</span><span style="color:#BABED8;">                                               </span></span>
<span class="line"><span style="color:#FFCB6B;">  anonymous</span><span style="color:#C3E88D;">  manage</span><span style="color:#C3E88D;"> anonymous</span><span style="color:#C3E88D;"> access</span><span style="color:#C3E88D;"> to</span><span style="color:#C3E88D;"> buckets</span><span style="color:#C3E88D;"> and</span><span style="color:#C3E88D;"> objects</span><span style="color:#BABED8;">                     </span></span>
<span class="line"><span style="color:#FFCB6B;">  batch</span><span style="color:#C3E88D;">      manage</span><span style="color:#C3E88D;"> batch</span><span style="color:#C3E88D;"> jobs</span><span style="color:#BABED8;">                                                  </span></span>
<span class="line"><span style="color:#FFCB6B;">  cp</span><span style="color:#C3E88D;">         copy</span><span style="color:#C3E88D;"> objects</span><span style="color:#BABED8;">                                                       </span></span>
<span class="line"><span style="color:#FFCB6B;">  cat</span><span style="color:#C3E88D;">        display</span><span style="color:#C3E88D;"> object</span><span style="color:#C3E88D;"> contents</span><span style="color:#BABED8;">                                            </span></span>
<span class="line"><span style="color:#FFCB6B;">  diff</span><span style="color:#C3E88D;">       list</span><span style="color:#C3E88D;"> differences</span><span style="color:#C3E88D;"> in</span><span style="color:#C3E88D;"> object</span><span style="color:#C3E88D;"> name,</span><span style="color:#C3E88D;"> size,</span><span style="color:#C3E88D;"> and</span><span style="color:#C3E88D;"> date</span><span style="color:#C3E88D;"> between</span><span style="color:#C3E88D;"> two</span><span style="color:#C3E88D;"> buckets</span></span>
<span class="line"><span style="color:#FFCB6B;">  du</span><span style="color:#C3E88D;">         summarize</span><span style="color:#C3E88D;"> disk</span><span style="color:#C3E88D;"> usage</span><span style="color:#C3E88D;"> recursively</span><span style="color:#BABED8;">                                   </span></span>
<span class="line"><span style="color:#FFCB6B;">  encrypt</span><span style="color:#C3E88D;">    manage</span><span style="color:#C3E88D;"> bucket</span><span style="color:#C3E88D;"> encryption</span><span style="color:#C3E88D;"> config</span><span style="color:#BABED8;">                                    </span></span>
<span class="line"><span style="color:#FFCB6B;">  event</span><span style="color:#C3E88D;">      manage</span><span style="color:#C3E88D;"> object</span><span style="color:#C3E88D;"> notifications</span><span style="color:#BABED8;">                                        </span></span>
<span class="line"><span style="color:#FFCB6B;">  find</span><span style="color:#C3E88D;">       search</span><span style="color:#C3E88D;"> for</span><span style="color:#C3E88D;"> objects</span><span style="color:#BABED8;">                                                 </span></span>
<span class="line"><span style="color:#FFCB6B;">  get</span><span style="color:#C3E88D;">        get</span><span style="color:#C3E88D;"> s3</span><span style="color:#C3E88D;"> object</span><span style="color:#C3E88D;"> to</span><span style="color:#C3E88D;"> local</span><span style="color:#BABED8;">                                             </span></span>
<span class="line"><span style="color:#FFCB6B;">  head</span><span style="color:#C3E88D;">       display</span><span style="color:#C3E88D;"> first</span><span style="color:#89DDFF;"> &#39;</span><span style="color:#C3E88D;">n</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;"> lines</span><span style="color:#C3E88D;"> of</span><span style="color:#C3E88D;"> an</span><span style="color:#C3E88D;"> object</span><span style="color:#BABED8;">                               </span></span>
<span class="line"><span style="color:#FFCB6B;">  ilm</span><span style="color:#C3E88D;">        manage</span><span style="color:#C3E88D;"> bucket</span><span style="color:#C3E88D;"> lifecycle</span><span style="color:#BABED8;">                                            </span></span>
<span class="line"><span style="color:#FFCB6B;">  idp</span><span style="color:#C3E88D;">        manage</span><span style="color:#C3E88D;"> MinIO</span><span style="color:#C3E88D;"> IDentity</span><span style="color:#C3E88D;"> Provider</span><span style="color:#C3E88D;"> server</span><span style="color:#C3E88D;"> configuration</span><span style="color:#BABED8;">                </span></span>
<span class="line"><span style="color:#FFCB6B;">  license</span><span style="color:#C3E88D;">    license</span><span style="color:#C3E88D;"> related</span><span style="color:#C3E88D;"> commands</span><span style="color:#BABED8;">                                           </span></span>
<span class="line"><span style="color:#FFCB6B;">  legalhold</span><span style="color:#C3E88D;">  manage</span><span style="color:#C3E88D;"> legal</span><span style="color:#C3E88D;"> hold</span><span style="color:#C3E88D;"> for</span><span style="color:#C3E88D;"> object</span><span style="color:#89DDFF;">(</span><span style="color:#FFCB6B;">s</span><span style="color:#89DDFF;">)</span><span style="color:#BABED8;">                                    </span></span>
<span class="line"><span style="color:#FFCB6B;">  ls</span><span style="color:#C3E88D;">         list</span><span style="color:#C3E88D;"> buckets</span><span style="color:#C3E88D;"> and</span><span style="color:#C3E88D;"> objects</span><span style="color:#BABED8;">                                           </span></span>
<span class="line"><span style="color:#FFCB6B;">  mb</span><span style="color:#C3E88D;">         make</span><span style="color:#C3E88D;"> a</span><span style="color:#C3E88D;"> bucket</span><span style="color:#BABED8;">                                                      </span></span>
<span class="line"><span style="color:#FFCB6B;">  mv</span><span style="color:#C3E88D;">         move</span><span style="color:#C3E88D;"> objects</span><span style="color:#BABED8;">                                                       </span></span>
<span class="line"><span style="color:#FFCB6B;">  mirror</span><span style="color:#C3E88D;">     synchronize</span><span style="color:#C3E88D;"> object</span><span style="color:#89DDFF;">(</span><span style="color:#FFCB6B;">s</span><span style="color:#89DDFF;">)</span><span style="color:#C3E88D;"> to</span><span style="color:#C3E88D;"> a</span><span style="color:#C3E88D;"> remote</span><span style="color:#C3E88D;"> site</span><span style="color:#BABED8;">                             </span></span>
<span class="line"><span style="color:#FFCB6B;">  od</span><span style="color:#C3E88D;">         measure</span><span style="color:#C3E88D;"> single</span><span style="color:#C3E88D;"> stream</span><span style="color:#C3E88D;"> upload</span><span style="color:#C3E88D;"> and</span><span style="color:#C3E88D;"> download</span><span style="color:#BABED8;">                          </span></span>
<span class="line"><span style="color:#FFCB6B;">  ping</span><span style="color:#C3E88D;">       perform</span><span style="color:#C3E88D;"> liveness</span><span style="color:#C3E88D;"> check</span><span style="color:#BABED8;">                                             </span></span>
<span class="line"><span style="color:#FFCB6B;">  pipe</span><span style="color:#C3E88D;">       stream</span><span style="color:#C3E88D;"> STDIN</span><span style="color:#C3E88D;"> to</span><span style="color:#C3E88D;"> an</span><span style="color:#C3E88D;"> object</span><span style="color:#BABED8;">                                          </span></span>
<span class="line"><span style="color:#FFCB6B;">  put</span><span style="color:#C3E88D;">        upload</span><span style="color:#C3E88D;"> an</span><span style="color:#C3E88D;"> object</span><span style="color:#C3E88D;"> to</span><span style="color:#C3E88D;"> a</span><span style="color:#C3E88D;"> bucket</span><span style="color:#BABED8;">                                       </span></span>
<span class="line"><span style="color:#FFCB6B;">  quota</span><span style="color:#C3E88D;">      manage</span><span style="color:#C3E88D;"> bucket</span><span style="color:#C3E88D;"> quota</span><span style="color:#BABED8;">                                                </span></span>
<span class="line"><span style="color:#FFCB6B;">  rm</span><span style="color:#C3E88D;">         remove</span><span style="color:#C3E88D;"> object</span><span style="color:#89DDFF;">(</span><span style="color:#FFCB6B;">s</span><span style="color:#89DDFF;">)</span><span style="color:#BABED8;">                                                   </span></span>
<span class="line"><span style="color:#FFCB6B;">  retention</span><span style="color:#C3E88D;">  set</span><span style="color:#C3E88D;"> retention</span><span style="color:#C3E88D;"> for</span><span style="color:#C3E88D;"> object</span><span style="color:#89DDFF;">(</span><span style="color:#FFCB6B;">s</span><span style="color:#89DDFF;">)</span><span style="color:#BABED8;">                                        </span></span>
<span class="line"><span style="color:#FFCB6B;">  rb</span><span style="color:#C3E88D;">         remove</span><span style="color:#C3E88D;"> a</span><span style="color:#C3E88D;"> bucket</span><span style="color:#BABED8;">                                                    </span></span>
<span class="line"><span style="color:#FFCB6B;">  replicate</span><span style="color:#C3E88D;">  configure</span><span style="color:#C3E88D;"> server</span><span style="color:#C3E88D;"> side</span><span style="color:#C3E88D;"> bucket</span><span style="color:#C3E88D;"> replication</span><span style="color:#BABED8;">                           </span></span>
<span class="line"><span style="color:#FFCB6B;">  ready</span><span style="color:#C3E88D;">      checks</span><span style="color:#C3E88D;"> if</span><span style="color:#C3E88D;"> the</span><span style="color:#C3E88D;"> cluster</span><span style="color:#C3E88D;"> is</span><span style="color:#C3E88D;"> ready</span><span style="color:#C3E88D;"> or</span><span style="color:#C3E88D;"> not</span><span style="color:#BABED8;">                              </span></span>
<span class="line"><span style="color:#FFCB6B;">  sql</span><span style="color:#C3E88D;">        run</span><span style="color:#C3E88D;"> sql</span><span style="color:#C3E88D;"> queries</span><span style="color:#C3E88D;"> on</span><span style="color:#C3E88D;"> objects</span><span style="color:#BABED8;">                                         </span></span>
<span class="line"><span style="color:#82AAFF;">  stat</span><span style="color:#C3E88D;">       show</span><span style="color:#C3E88D;"> object</span><span style="color:#C3E88D;"> metadata</span><span style="color:#BABED8;">                                               </span></span>
<span class="line"><span style="color:#FFCB6B;">  support</span><span style="color:#C3E88D;">    support</span><span style="color:#C3E88D;"> related</span><span style="color:#C3E88D;"> commands</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br></div></div><h2 id="常用命令" tabindex="-1">常用命令 <a class="header-anchor" href="#常用命令" aria-label="Permalink to &quot;常用命令&quot;">​</a></h2><h3 id="添加主机" tabindex="-1">添加主机 <a class="header-anchor" href="#添加主机" aria-label="Permalink to &quot;添加主机&quot;">​</a></h3><p>mc config host add 服务器名称 endpoint地址 accesskey secretkey</p><p>mc config host list 添加本地主机 mc config host remove minio-server #删除本地主机</p><div class="language-shell line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-palenight vp-code" tabindex="0"><code><span class="line"><span style="color:#FFCB6B;">mc</span><span style="color:#C3E88D;"> config</span><span style="color:#C3E88D;"> host</span><span style="color:#C3E88D;"> add</span><span style="color:#C3E88D;"> minio-S3</span><span style="color:#C3E88D;">  https://xxx.ap-beijing.xxx.com</span><span style="color:#C3E88D;">  ak</span><span style="color:#C3E88D;"> sk</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>Added <code>minio-S3</code> successfully.</p><h3 id="创建桶" tabindex="-1">创建桶 <a class="header-anchor" href="#创建桶" aria-label="Permalink to &quot;创建桶&quot;">​</a></h3><p>mc mb 服务器名称/桶名称</p><h3 id="查询桶" tabindex="-1">查询桶 <a class="header-anchor" href="#查询桶" aria-label="Permalink to &quot;查询桶&quot;">​</a></h3><p>mc ls minio-S3</p><h3 id="上传文件" tabindex="-1">上传文件 <a class="header-anchor" href="#上传文件" aria-label="Permalink to &quot;上传文件&quot;">​</a></h3><div class="language-shell line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-palenight vp-code" tabindex="0"><code><span class="line"><span style="color:#FFCB6B;">mc</span><span style="color:#C3E88D;"> cp</span><span style="color:#C3E88D;"> Check.tar.gz</span><span style="color:#C3E88D;">  minio-S3/check/</span><span style="color:#676E95;font-style:italic;"> # 上传一个文件到bucket中</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><div class="language-shell line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-palenight vp-code" tabindex="0"><code><span class="line"><span style="color:#FFCB6B;">mc</span><span style="color:#C3E88D;"> cp</span><span style="color:#C3E88D;"> /etc</span><span style="color:#C3E88D;">  minio-S3/134</span><span style="color:#C3E88D;"> --recursive</span><span style="color:#676E95;font-style:italic;"> # 上传一个目录到bucket中</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><h3 id="上传和下载就是linux中的cp命令" tabindex="-1">上传和下载就是linux中的cp命令 <a class="header-anchor" href="#上传和下载就是linux中的cp命令" aria-label="Permalink to &quot;上传和下载就是linux中的cp命令&quot;">​</a></h3><div class="language-shell line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-palenight vp-code" tabindex="0"><code><span class="line"><span style="color:#FFCB6B;">mc</span><span style="color:#C3E88D;"> cp</span><span style="color:#C3E88D;"> -r</span><span style="color:#BABED8;"> (别名)/(</span><span style="color:#FFCB6B;">桶名</span><span style="color:#BABED8;">)/source-bucket/source-folder (</span><span style="color:#FFCB6B;">本地路径</span><span style="color:#BABED8;">)/local-folder  </span><span style="color:#676E95;font-style:italic;">#下载目录</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><h3 id="删除bucket中的文件" tabindex="-1">删除bucket中的文件 <a class="header-anchor" href="#删除bucket中的文件" aria-label="Permalink to &quot;删除bucket中的文件&quot;">​</a></h3><p>删除文件</p><div class="language-shell line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-palenight vp-code" tabindex="0"><code><span class="line"><span style="color:#FFCB6B;">mc</span><span style="color:#C3E88D;"> rm</span><span style="color:#C3E88D;"> minio-S3/lvzhenjiang/hosts</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>删除目录</p><div class="language-shell line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-palenight vp-code" tabindex="0"><code><span class="line"><span style="color:#FFCB6B;">mc</span><span style="color:#C3E88D;"> rm</span><span style="color:#C3E88D;"> minio-S3/test/etc</span><span style="color:#C3E88D;"> --recursive</span><span style="color:#C3E88D;"> --force</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><h3 id="删除bucket" tabindex="-1">删除bucket <a class="header-anchor" href="#删除bucket" aria-label="Permalink to &quot;删除bucket&quot;">​</a></h3><p>删除 没有文件的bucket</p><div class="language-shell line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-palenight vp-code" tabindex="0"><code><span class="line"><span style="color:#FFCB6B;">mc</span><span style="color:#C3E88D;"> rb</span><span style="color:#C3E88D;"> minio-S3/test</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>删除 有文件的bucket</p><div class="language-shell line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-palenight vp-code" tabindex="0"><code><span class="line"><span style="color:#FFCB6B;">mc</span><span style="color:#C3E88D;"> rb</span><span style="color:#C3E88D;"> minio-S3/test</span><span style="color:#C3E88D;"> --force</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>3、添加minio集群</p><p>添加集群语法： mc config host add (自定义名称) <code>(http/https)://(IP):(端口)</code> (账户) (密码)</p><p>source数据</p><p>添加</p><div class="language-shell line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-palenight vp-code" tabindex="0"><code><span class="line"><span style="color:#FFCB6B;">mc</span><span style="color:#C3E88D;"> config</span><span style="color:#C3E88D;"> host</span><span style="color:#C3E88D;"> add</span><span style="color:#C3E88D;"> minio_1</span><span style="color:#C3E88D;"> http://172.26.25.16:7001</span><span style="color:#C3E88D;"> minioadmin</span><span style="color:#C3E88D;"> minioadmin</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><div class="language-shell line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-palenight vp-code" tabindex="0"><code><span class="line"><span style="color:#FFCB6B;">mc</span><span style="color:#C3E88D;"> config</span><span style="color:#C3E88D;"> host</span><span style="color:#C3E88D;"> add</span><span style="color:#C3E88D;"> minio_1_1</span><span style="color:#C3E88D;"> http://172.26.25.16:7002</span><span style="color:#C3E88D;"> minioadmin</span><span style="color:#C3E88D;"> minioadmin</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>或者</p><div class="language-shell line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-palenight vp-code" tabindex="0"><code><span class="line"><span style="color:#FFCB6B;">mc</span><span style="color:#C3E88D;"> alias</span><span style="color:#C3E88D;"> set</span><span style="color:#C3E88D;"> minio_1</span><span style="color:#C3E88D;"> http://172.26.25.16:7001</span><span style="color:#C3E88D;"> minioadmin</span><span style="color:#C3E88D;"> minioadmin</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><div class="tip custom-block"><p class="custom-block-title">注意</p><p>多个集群只添加一个即可</p></div><p>查看配置的集群</p><div class="language-shell line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-palenight vp-code" tabindex="0"><code><span class="line"><span style="color:#FFCB6B;">mc</span><span style="color:#C3E88D;"> admin</span><span style="color:#C3E88D;"> info</span><span style="color:#C3E88D;"> minio_1</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>删除</p><div class="language-shell line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-palenight vp-code" tabindex="0"><code><span class="line"><span style="color:#FFCB6B;">mc</span><span style="color:#C3E88D;"> config</span><span style="color:#C3E88D;"> host</span><span style="color:#C3E88D;"> remove</span><span style="color:#C3E88D;"> minio_1</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><div class="language-shell line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-palenight vp-code" tabindex="0"><code><span class="line"><span style="color:#FFCB6B;">mc</span><span style="color:#C3E88D;"> config</span><span style="color:#C3E88D;"> host</span><span style="color:#C3E88D;"> remove</span><span style="color:#C3E88D;"> minio_1_1</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>target数据</p><div class="language-json line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki material-theme-palenight vp-code" tabindex="0"><code><span class="line"><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">  &quot;</span><span style="color:#C792EA;">url</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">http://172.26.25.42:6001/api/v1/service-account-credentials</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#89DDFF;">  &quot;</span><span style="color:#C792EA;">accessKey</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">S3RRTIrydhWt9d2oTQ9k</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#89DDFF;">  &quot;</span><span style="color:#C792EA;">secretKey</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">jMvemKGD7m1aeIG5BDlreQzTa1d5n9WSIXeOy6va</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#89DDFF;">  &quot;</span><span style="color:#C792EA;">api</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">s3v4</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#89DDFF;">  &quot;</span><span style="color:#C792EA;">path</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">auto</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>添加</p><div class="language-shell line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-palenight vp-code" tabindex="0"><code><span class="line"><span style="color:#FFCB6B;">mc</span><span style="color:#C3E88D;"> config</span><span style="color:#C3E88D;"> host</span><span style="color:#C3E88D;"> add</span><span style="color:#C3E88D;"> minio_2</span><span style="color:#C3E88D;"> http://172.26.25.42:7001</span><span style="color:#C3E88D;"> minioadmin</span><span style="color:#C3E88D;"> minioadmin</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><div class="language-shell line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-palenight vp-code" tabindex="0"><code><span class="line"><span style="color:#FFCB6B;">mc</span><span style="color:#C3E88D;"> config</span><span style="color:#C3E88D;"> host</span><span style="color:#C3E88D;"> add</span><span style="color:#C3E88D;"> minio_2_1</span><span style="color:#C3E88D;"> http://172.26.25.42:7002</span><span style="color:#C3E88D;"> minioadmin</span><span style="color:#C3E88D;"> minioadmin</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>删除</p><div class="language-shell line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-palenight vp-code" tabindex="0"><code><span class="line"><span style="color:#FFCB6B;">mc</span><span style="color:#C3E88D;"> config</span><span style="color:#C3E88D;"> host</span><span style="color:#C3E88D;"> remove</span><span style="color:#C3E88D;"> minio_2</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><div class="language-shell line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-palenight vp-code" tabindex="0"><code><span class="line"><span style="color:#FFCB6B;">mc</span><span style="color:#C3E88D;"> config</span><span style="color:#C3E88D;"> host</span><span style="color:#C3E88D;"> remove</span><span style="color:#C3E88D;"> minio_2_1</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>删除集群语法： mc config host remove (自定义名称) <code>(http/https)://(IP):(端口)</code> (账户) (密码)</p><p>查看配置的域名</p><div class="language-shell line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-palenight vp-code" tabindex="0"><code><span class="line"><span style="color:#FFCB6B;">mc</span><span style="color:#C3E88D;"> alias</span><span style="color:#C3E88D;"> list</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>4、数据同步</p><p>全量同步语法： mc mirror --remove --overwrite --watch (源集群) (目标集群)</p><div class="language-shell line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-palenight vp-code" tabindex="0"><code><span class="line"><span style="color:#FFCB6B;">mc</span><span style="color:#C3E88D;"> mirror</span><span style="color:#C3E88D;"> --watch</span><span style="color:#C3E88D;"> minio_1</span><span style="color:#C3E88D;"> minio_2</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>某个桶同步语法： mc mirror --remove --overwrite --watch (源集群/桶名称) (目标集群/桶名称)</p><p><code>前提是目标的桶必须先创建</code></p><div class="language-shell line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-palenight vp-code" tabindex="0"><code><span class="line"><span style="color:#FFCB6B;">mc</span><span style="color:#C3E88D;"> mirror</span><span style="color:#C3E88D;"> --watch</span><span style="color:#C3E88D;"> minio_1/vgpu</span><span style="color:#C3E88D;"> minio_2/vgpu</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>以下是全量同步minio_1同步到minio_2</p><div class="tip custom-block"><p class="custom-block-title">同步说明</p><p>只会同步文件，本地修改或删除，云存储不会变化</p><div class="language-shell line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-palenight vp-code" tabindex="0"><code><span class="line"><span style="color:#FFCB6B;">mc</span><span style="color:#C3E88D;"> mirror</span><span style="color:#C3E88D;"> --watch</span><span style="color:#C3E88D;"> minio_1</span><span style="color:#C3E88D;"> minio_2</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>同步文件后，本地修改文件，会自行在另一集群进行相应的修改</p><div class="language-shell line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-palenight vp-code" tabindex="0"><code><span class="line"><span style="color:#FFCB6B;">mc</span><span style="color:#C3E88D;"> mirror</span><span style="color:#C3E88D;"> --overwrite</span><span style="color:#C3E88D;"> --watch</span><span style="color:#C3E88D;"> minio_1</span><span style="color:#C3E88D;"> minio_2</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>同步文件后，本地修改/删除文件，会自行在另一集群进行相应的修改/删除</p><div class="language-shell line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-palenight vp-code" tabindex="0"><code><span class="line"><span style="color:#FFCB6B;">mc</span><span style="color:#C3E88D;"> mirror</span><span style="color:#C3E88D;"> --remove</span><span style="color:#C3E88D;"> --overwrite</span><span style="color:#C3E88D;"> --watch</span><span style="color:#C3E88D;"> minio_1</span><span style="color:#C3E88D;"> minio_2</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><div class="tip custom-block"><p class="custom-block-title">cp 和 mirror 区别</p><p>mc cp 和 mc mirror 都是 minIO Client（mc）的命令，用于在 minIO 对象存储服务中进行文件传输和同步操作。</p><p>mc cp： mc cp 用于将本地文件或对象从一个位置复制到另一个位置。 可以用来上传/下载文件、目录，或者在不同桶（bucket）之间进行复制。 通常用于单个文件或目录的复制操作。</p><p>mc mirror： mc mirror 用于在两个目录之间进行镜像同步。 它会递归地比较源目录和目标目录中的内容，并确保它们保持同步。 如果目标目录中不存在源目录中的文件，则会将其复制过去； 如果源目录中的文件被删除了，则目标目录中相应的文件也会被删除。 总的来说，mc cp 主要用于简单的文件复制操作，而 mc mirror 则更适合于目录之间的完整同步操作，可以保持目录结构的一致性， 并确保两个目录中的文件保持同步状态。</p></div></div><p>5、效果</p><div class="language-shell line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-palenight vp-code" tabindex="0"><code><span class="line"><span style="color:#FFCB6B;">mc</span><span style="color:#C3E88D;"> mirror</span><span style="color:#C3E88D;"> --remove</span><span style="color:#C3E88D;"> --overwrite</span><span style="color:#C3E88D;"> --watch</span><span style="color:#C3E88D;"> minio_1</span><span style="color:#C3E88D;"> minio_2</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><h2 id="带入文件到minio" tabindex="-1">带入文件到Minio <a class="header-anchor" href="#带入文件到minio" aria-label="Permalink to &quot;带入文件到Minio&quot;">​</a></h2><h3 id="下载导入工具-rclone" tabindex="-1">下载导入工具 rclone <a class="header-anchor" href="#下载导入工具-rclone" aria-label="Permalink to &quot;下载导入工具 rclone&quot;">​</a></h3><div class="language-shell line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-palenight vp-code" tabindex="0"><code><span class="line"><span style="color:#FFCB6B;">curl</span><span style="color:#C3E88D;"> -O</span><span style="color:#C3E88D;"> https://downloads.rclone.org/rclone-current-linux-amd64.zip</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><div class="language-shell line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-palenight vp-code" tabindex="0"><code><span class="line"><span style="color:#FFCB6B;">unzip</span><span style="color:#C3E88D;"> rclone-current-linux-amd64.zip</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><div class="language-shell line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-palenight vp-code" tabindex="0"><code><span class="line"><span style="color:#82AAFF;">cd</span><span style="color:#C3E88D;"> rclone-</span><span style="color:#BABED8;">*</span><span style="color:#C3E88D;">-linux-amd64</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><div class="language-shell line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-palenight vp-code" tabindex="0"><code><span class="line"><span style="color:#FFCB6B;">sudo</span><span style="color:#C3E88D;"> cp</span><span style="color:#C3E88D;"> rclone</span><span style="color:#C3E88D;"> /usr/bin/</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><div class="language-shell line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-palenight vp-code" tabindex="0"><code><span class="line"><span style="color:#FFCB6B;">sudo</span><span style="color:#C3E88D;"> chown</span><span style="color:#C3E88D;"> root:root</span><span style="color:#C3E88D;"> /usr/bin/rclone</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><div class="language-shell line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-palenight vp-code" tabindex="0"><code><span class="line"><span style="color:#FFCB6B;">sudo</span><span style="color:#C3E88D;"> chmod</span><span style="color:#F78C6C;"> 755</span><span style="color:#C3E88D;"> /usr/bin/rclone</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><div class="language-shell line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-palenight vp-code" tabindex="0"><code><span class="line"><span style="color:#FFCB6B;">sudo</span><span style="color:#C3E88D;"> mkdir</span><span style="color:#C3E88D;"> -p</span><span style="color:#C3E88D;"> /usr/local/share/man/man1</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><div class="language-shell line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-palenight vp-code" tabindex="0"><code><span class="line"><span style="color:#FFCB6B;">sudo</span><span style="color:#C3E88D;"> cp</span><span style="color:#C3E88D;"> rclone.1</span><span style="color:#C3E88D;"> /usr/local/share/man/man1/</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><div class="language-shell line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-palenight vp-code" tabindex="0"><code><span class="line"><span style="color:#FFCB6B;">sudo</span><span style="color:#C3E88D;"> mandb</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>检查安装</p><div class="language-shell line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-palenight vp-code" tabindex="0"><code><span class="line"><span style="color:#FFCB6B;">rclone</span><span style="color:#C3E88D;"> version</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><h3 id="rclone配置minio" tabindex="-1">rclone配置minio <a class="header-anchor" href="#rclone配置minio" aria-label="Permalink to &quot;rclone配置minio&quot;">​</a></h3><p>一般是在/root/.config/rclone目录下创建配置文件rclone.conf，内容如下：</p><div class="language-shell line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-palenight vp-code" tabindex="0"><code><span class="line"><span style="color:#FFCB6B;">vim</span><span style="color:#C3E88D;"> /root/.config/rclone.rclone.conf</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><div class="language-bash line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki material-theme-palenight vp-code" tabindex="0"><code><span class="line"><span style="color:#89DDFF;">[</span><span style="color:#BABED8;">minio</span><span style="color:#89DDFF;">]</span></span>
<span class="line"><span style="color:#82AAFF;">type</span><span style="color:#C3E88D;"> =</span><span style="color:#C3E88D;"> s3</span></span>
<span class="line"><span style="color:#FFCB6B;">provider</span><span style="color:#C3E88D;"> =</span><span style="color:#C3E88D;"> Minio</span></span>
<span class="line"><span style="color:#FFCB6B;">env_auth</span><span style="color:#C3E88D;"> =</span><span style="color:#89DDFF;"> false</span></span>
<span class="line"><span style="color:#FFCB6B;">access_key_id</span><span style="color:#C3E88D;"> =</span><span style="color:#C3E88D;"> minioadmin</span></span>
<span class="line"><span style="color:#FFCB6B;">secret_access_key</span><span style="color:#C3E88D;"> =</span><span style="color:#C3E88D;"> minioadmin</span></span>
<span class="line"><span style="color:#FFCB6B;">region</span><span style="color:#C3E88D;"> =</span><span style="color:#BABED8;"> </span></span>
<span class="line"><span style="color:#FFCB6B;">endpoint</span><span style="color:#C3E88D;"> =</span><span style="color:#C3E88D;"> http://172.26.25.16:7100</span></span>
<span class="line"><span style="color:#FFCB6B;">location_constraint</span><span style="color:#C3E88D;"> =</span></span>
<span class="line"><span style="color:#FFCB6B;">server_side_encryption</span><span style="color:#C3E88D;"> =</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p>检测配置</p><p>配置完成后，可以通过rclone config命令查看配置结果：</p><div class="language-shell line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-palenight vp-code" tabindex="0"><code><span class="line"><span style="color:#FFCB6B;">rclone</span><span style="color:#C3E88D;"> config</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><div class="language-shell line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-palenight vp-code" tabindex="0"><code><span class="line"><span style="color:#FFCB6B;">Current</span><span style="color:#C3E88D;"> remotes:</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FFCB6B;">Name</span><span style="color:#C3E88D;">                 Type</span></span>
<span class="line"><span style="color:#C3E88D;">====</span><span style="color:#C3E88D;">                 ====</span></span>
<span class="line"><span style="color:#FFCB6B;">minio</span><span style="color:#C3E88D;">                s3</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FFCB6B;">e</span><span style="color:#BABED8;">) Edit existing remote</span></span>
<span class="line"><span style="color:#FFCB6B;">n</span><span style="color:#BABED8;">) New remote</span></span>
<span class="line"><span style="color:#FFCB6B;">d</span><span style="color:#BABED8;">) Delete remote</span></span>
<span class="line"><span style="color:#FFCB6B;">r</span><span style="color:#BABED8;">) Rename remote</span></span>
<span class="line"><span style="color:#FFCB6B;">c</span><span style="color:#BABED8;">) Copy remote</span></span>
<span class="line"><span style="color:#FFCB6B;">s</span><span style="color:#BABED8;">) Set configuration password</span></span>
<span class="line"><span style="color:#FFCB6B;">q</span><span style="color:#BABED8;">) Quit config</span></span>
<span class="line"><span style="color:#FFCB6B;">e/n/d/r/c/s/q</span><span style="color:#BABED8;">&gt; </span><span style="color:#C3E88D;">q</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><p>查看minio当前已经有的bucket,命令：rclone lsd minio:</p><div class="language-shell line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-palenight vp-code" tabindex="0"><code><span class="line"><span style="color:#FFCB6B;">rclone</span><span style="color:#C3E88D;"> lsd</span><span style="color:#C3E88D;"> minio:</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><h3 id="复制本机文件到minio" tabindex="-1">复制本机文件到minio <a class="header-anchor" href="#复制本机文件到minio" aria-label="Permalink to &quot;复制本机文件到minio&quot;">​</a></h3><p>执行复制命令：rclone copy 本机文件全路径 minio:目标bucket/目标路径</p><div class="language-shell line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-palenight vp-code" tabindex="0"><code><span class="line"><span style="color:#FFCB6B;">rclone</span><span style="color:#C3E88D;"> copy</span><span style="color:#C3E88D;"> /data/dic1.zip</span><span style="color:#C3E88D;"> minio:wwdev/vs</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>文件夹示例：会在bucket(wwdev)下，出现一个files文件夹，原理是将/data/files下的每个文件，都复制到指定目录下</p><div class="language-shell line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-palenight vp-code" tabindex="0"><code><span class="line"><span style="color:#FFCB6B;">rclone</span><span style="color:#C3E88D;"> copy</span><span style="color:#C3E88D;"> /data/files</span><span style="color:#C3E88D;"> minio:wwdev/files</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div>`,122),o=[p];function r(c,t,i,y,d,m){return a(),n("div",null,o)}const C=s(e,[["render",r]]);export{D as __pageData,C as default};
