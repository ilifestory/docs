import{_ as s,c as n,o as a,a4 as l}from"./chunks/framework.CCJHkvW2.js";const m=JSON.parse('{"title":"docker 部署","description":"","frontmatter":{},"headers":[],"relativePath":"deployment/docker/docker-compose软件安装.md","filePath":"deployment/docker/docker-compose软件安装.md","lastUpdated":1707190539000}'),p={name:"deployment/docker/docker-compose软件安装.md"},e=l(`<h1 id="docker-部署" tabindex="-1">docker 部署 <a class="header-anchor" href="#docker-部署" aria-label="Permalink to &quot;docker 部署&quot;">​</a></h1><h2 id="jenkins" tabindex="-1">jenkins <a class="header-anchor" href="#jenkins" aria-label="Permalink to &quot;jenkins&quot;">​</a></h2><div class="language-shell line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-palenight vp-code" tabindex="0"><code><span class="line"><span style="color:#FFCB6B;">version:</span><span style="color:#89DDFF;"> &#39;</span><span style="color:#C3E88D;">3</span><span style="color:#89DDFF;">&#39;</span></span>
<span class="line"><span style="color:#FFCB6B;">services:</span></span>
<span class="line"><span style="color:#FFCB6B;">  jenkins:</span></span>
<span class="line"><span style="color:#FFCB6B;">    container_name:</span><span style="color:#89DDFF;"> \${</span><span style="color:#BABED8;">CONTAINER_NAME</span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#FFCB6B;">    image:</span><span style="color:#C3E88D;"> jenkins/jenkins:2.431</span></span>
<span class="line"><span style="color:#FFCB6B;">    restart:</span><span style="color:#C3E88D;"> always</span></span>
<span class="line"><span style="color:#FFCB6B;">    privileged:</span><span style="color:#89DDFF;"> true</span></span>
<span class="line"><span style="color:#FFCB6B;">    user:</span><span style="color:#C3E88D;"> root</span></span>
<span class="line"><span style="color:#FFCB6B;">    ports:</span></span>
<span class="line"><span style="color:#FFCB6B;">      -</span><span style="color:#89DDFF;"> \${</span><span style="color:#BABED8;">PANEL_APP_PORT_HTTP</span><span style="color:#89DDFF;">}</span><span style="color:#C3E88D;">:8080</span></span>
<span class="line"><span style="color:#FFCB6B;">    volumes:</span></span>
<span class="line"><span style="color:#FFCB6B;">      -</span><span style="color:#C3E88D;"> /zhangling/jenkins:/var/jenkins_home</span></span>
<span class="line"><span style="color:#FFCB6B;">      -</span><span style="color:#C3E88D;"> /var/run/docker.sock:/var/run/docker.sock</span></span>
<span class="line"><span style="color:#FFCB6B;">      -</span><span style="color:#C3E88D;"> /usr/bin/docker:/usr/bin/docker</span></span>
<span class="line"><span style="color:#FFCB6B;">    networks:</span></span>
<span class="line"><span style="color:#FFCB6B;">      -</span><span style="color:#C3E88D;"> zhangling-network</span></span>
<span class="line"><span style="color:#FFCB6B;">    labels:</span></span>
<span class="line"><span style="color:#FFCB6B;">      createdBy:</span><span style="color:#89DDFF;"> &quot;</span><span style="color:#C3E88D;">zhangling</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#FFCB6B;">networks:</span></span>
<span class="line"><span style="color:#FFCB6B;">  zhangling-network:</span></span>
<span class="line"><span style="color:#FFCB6B;">    external:</span><span style="color:#89DDFF;"> true</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br></div></div><div class="tip custom-block"><p class="custom-block-title">external: true</p><p><code>external: true</code> 表示这个网络是由外部创建的，不由该 docker-compose 文件创建。这意味着在运行该 docker-compose 文件之前， 该网络必须存在。一般情况下，这个外部网络是由其他 docker-compose 文件或手动创建的，该 docker-compose 文件需要连接到这个外部网络。 这样可以在多个 docker-compose 项目之间共享网络，以便容器之间进行通信和服务发现。</p></div><div class="tip custom-block"><p class="custom-block-title">--privileged=true</p><p>当使用<code>--privileged=true</code>选项运行容器时，Docker会赋予容器几乎与主机相同的权限4。具体来说，这个选项做了以下两件事情： ①给容器添加了所有的capabilities ②允许容器访问主机的所有设备 这意味着在一个privileged容器中，我们可以做很多平时不能做的事情，例如加载内核模块、直接操作硬件设备等。 尽管<code>--privileged=true</code>选项为容器提供了强大的功能，但它也带来了一些严重的安全隐患。由于privileged容器具有几乎与主机相同的权限， 所以如果容器被恶意代码控制，那么攻击者就可以轻易地突破容器的边界，对主机进行任意操作5。</p><p>因此，我们需要谨慎地使用<code>--privileged=true</code>选项，只在真正需要的情况下才启用它。在可能的情况下，我们应该尽量使用其他更细粒度的权限控制手段， 例如通过<code>--cap-add</code>或<code>--device</code>参数来分别添加必要的capabilities或设备访问权限。 <code>--privileged=true</code>选项提供了强大的功能，使得我们可以在容器中执行一些需要特权的操作。然而，这个选项也带来了严重的安全隐患， 可能导致容器突破边界，对主机进行任意操作。因此，我们需要谨慎地使用这个选项，只在必要的情况下才启用它，并尽量使用其他更细粒度的权限控制手段。</p></div><h2 id="浏览器" tabindex="-1">浏览器 <a class="header-anchor" href="#浏览器" aria-label="Permalink to &quot;浏览器&quot;">​</a></h2><div class="language-shell line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-palenight vp-code" tabindex="0"><code><span class="line"><span style="color:#FFCB6B;">docker</span><span style="color:#C3E88D;"> run</span><span style="color:#C3E88D;"> -d</span><span style="color:#C3E88D;"> --name</span><span style="color:#C3E88D;"> firefox</span><span style="color:#C3E88D;"> -p</span><span style="color:#C3E88D;"> 8083:8083</span><span style="color:#C3E88D;"> -p</span><span style="color:#C3E88D;"> 5900:5900</span><span style="color:#C3E88D;"> oldiy/chrome-novnc:latest</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><h2 id="web连接工具" tabindex="-1">web连接工具 <a class="header-anchor" href="#web连接工具" aria-label="Permalink to &quot;web连接工具&quot;">​</a></h2><div class="language-shell line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-palenight vp-code" tabindex="0"><code><span class="line"><span style="color:#FFCB6B;">docker</span><span style="color:#C3E88D;"> run</span><span style="color:#C3E88D;"> -itd</span><span style="color:#C3E88D;"> --name</span><span style="color:#C3E88D;"> teamide-21080</span><span style="color:#C3E88D;"> -p</span><span style="color:#C3E88D;"> 21080:21080</span><span style="color:#C3E88D;"> -v</span><span style="color:#C3E88D;"> /data/teamide/data:/opt/teamide/data</span><span style="color:#C3E88D;"> teamide/teamide-server:latest</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><h2 id="禅道" tabindex="-1">禅道 <a class="header-anchor" href="#禅道" aria-label="Permalink to &quot;禅道&quot;">​</a></h2><div class="language-shell line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-palenight vp-code" tabindex="0"><code><span class="line"><span style="color:#FFCB6B;">version:</span><span style="color:#89DDFF;"> &#39;</span><span style="color:#C3E88D;">3.0</span><span style="color:#89DDFF;">&#39;</span></span>
<span class="line"><span style="color:#FFCB6B;">services:</span></span>
<span class="line"><span style="color:#FFCB6B;">  zentao:</span></span>
<span class="line"><span style="color:#FFCB6B;">    image:</span><span style="color:#C3E88D;"> hub.zentao.net/app/zentao:18.8</span></span>
<span class="line"><span style="color:#FFCB6B;">    container_name:</span><span style="color:#89DDFF;"> \${</span><span style="color:#BABED8;">CONTAINER_NAME</span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#FFCB6B;">    restart:</span><span style="color:#C3E88D;"> always</span></span>
<span class="line"><span style="color:#FFCB6B;">    ports:</span></span>
<span class="line"><span style="color:#FFCB6B;">      -</span><span style="color:#89DDFF;"> \${</span><span style="color:#BABED8;">PANEL_APP_PORT_HTTP</span><span style="color:#89DDFF;">}</span><span style="color:#C3E88D;">:80</span></span>
<span class="line"><span style="color:#FFCB6B;">    volumes:</span></span>
<span class="line"><span style="color:#FFCB6B;">      -</span><span style="color:#C3E88D;"> /zhangling/zentao/data:/data</span></span>
<span class="line"><span style="color:#FFCB6B;">    environment:</span></span>
<span class="line"><span style="color:#FFCB6B;">      -</span><span style="color:#C3E88D;"> MYSQL_INTERNAL=</span><span style="color:#89DDFF;">true</span></span>
<span class="line"><span style="color:#FFCB6B;">    networks:</span></span>
<span class="line"><span style="color:#FFCB6B;">      -</span><span style="color:#C3E88D;"> zhangling-network</span></span>
<span class="line"><span style="color:#FFCB6B;">    labels:</span></span>
<span class="line"><span style="color:#FFCB6B;">      createdBy:</span><span style="color:#89DDFF;"> &quot;</span><span style="color:#C3E88D;">zhangling</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#FFCB6B;">networks:</span></span>
<span class="line"><span style="color:#FFCB6B;">  zhangling-network:</span></span>
<span class="line"><span style="color:#FFCB6B;">    external:</span><span style="color:#89DDFF;"> true</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br></div></div><h2 id="mongodb" tabindex="-1">MongoDB <a class="header-anchor" href="#mongodb" aria-label="Permalink to &quot;MongoDB&quot;">​</a></h2><div class="language-shell line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-palenight vp-code" tabindex="0"><code><span class="line"><span style="color:#FFCB6B;">version:</span><span style="color:#89DDFF;"> &#39;</span><span style="color:#C3E88D;">3</span><span style="color:#89DDFF;">&#39;</span></span>
<span class="line"><span style="color:#FFCB6B;">services:</span></span>
<span class="line"><span style="color:#FFCB6B;">  mongodb:</span></span>
<span class="line"><span style="color:#FFCB6B;">    container_name:</span><span style="color:#89DDFF;"> \${</span><span style="color:#BABED8;">CONTAINER_NAME</span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#FFCB6B;">    image:</span><span style="color:#C3E88D;"> mongo:7.0.2</span></span>
<span class="line"><span style="color:#FFCB6B;">    restart:</span><span style="color:#C3E88D;"> always</span></span>
<span class="line"><span style="color:#FFCB6B;">    environment:</span></span>
<span class="line"><span style="color:#FFCB6B;">      MONGO_INITDB_ROOT_USERNAME:</span><span style="color:#89DDFF;"> \${</span><span style="color:#BABED8;">PANEL_DB_ROOT_USER</span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#FFCB6B;">      MONGO_INITDB_ROOT_PASSWORD:</span><span style="color:#89DDFF;"> \${</span><span style="color:#BABED8;">PANEL_DB_ROOT_PASSWORD</span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#FFCB6B;">    networks:</span></span>
<span class="line"><span style="color:#FFCB6B;">      -</span><span style="color:#C3E88D;"> zhangling-network</span></span>
<span class="line"><span style="color:#FFCB6B;">    ports:</span></span>
<span class="line"><span style="color:#FFCB6B;">      -</span><span style="color:#89DDFF;"> \${</span><span style="color:#BABED8;">PANEL_APP_PORT_HTTP</span><span style="color:#89DDFF;">}</span><span style="color:#C3E88D;">:27017</span></span>
<span class="line"><span style="color:#FFCB6B;">    volumes:</span></span>
<span class="line"><span style="color:#FFCB6B;">      -</span><span style="color:#C3E88D;"> ./data:/data/db</span></span>
<span class="line"><span style="color:#FFCB6B;">    labels:</span></span>
<span class="line"><span style="color:#FFCB6B;">      createdBy:</span><span style="color:#89DDFF;"> &quot;</span><span style="color:#C3E88D;">zhangling</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#FFCB6B;">networks:</span></span>
<span class="line"><span style="color:#FFCB6B;">  zhangling-network:</span></span>
<span class="line"><span style="color:#FFCB6B;">    external:</span><span style="color:#89DDFF;"> true</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br></div></div><h2 id="rabbit-mq" tabindex="-1">Rabbit MQ <a class="header-anchor" href="#rabbit-mq" aria-label="Permalink to &quot;Rabbit MQ&quot;">​</a></h2><div class="language-shell line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-palenight vp-code" tabindex="0"><code><span class="line"><span style="color:#FFCB6B;">version:</span><span style="color:#89DDFF;"> &#39;</span><span style="color:#C3E88D;">3</span><span style="color:#89DDFF;">&#39;</span></span>
<span class="line"><span style="color:#FFCB6B;">services:</span></span>
<span class="line"><span style="color:#FFCB6B;">  rabbitmq:</span></span>
<span class="line"><span style="color:#FFCB6B;">    image:</span><span style="color:#C3E88D;"> rabbitmq:3.12.8-management-alpine</span></span>
<span class="line"><span style="color:#FFCB6B;">    hostname:</span><span style="color:#C3E88D;"> rabbitmq</span></span>
<span class="line"><span style="color:#FFCB6B;">    container_name:</span><span style="color:#89DDFF;"> \${</span><span style="color:#BABED8;">CONTAINER_NAME</span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#FFCB6B;">    restart:</span><span style="color:#C3E88D;"> always</span></span>
<span class="line"><span style="color:#FFCB6B;">    ports:</span></span>
<span class="line"><span style="color:#FFCB6B;">        -</span><span style="color:#89DDFF;"> \${</span><span style="color:#BABED8;">PANEL_APP_PORT_SERVICE</span><span style="color:#89DDFF;">}</span><span style="color:#C3E88D;">:5672</span></span>
<span class="line"><span style="color:#FFCB6B;">        -</span><span style="color:#89DDFF;"> \${</span><span style="color:#BABED8;">PANEL_APP_PORT_HTTP</span><span style="color:#89DDFF;">}</span><span style="color:#C3E88D;">:15672</span></span>
<span class="line"><span style="color:#FFCB6B;">    environment:</span></span>
<span class="line"><span style="color:#FFCB6B;">      -</span><span style="color:#C3E88D;"> RABBITMQ_DEFAULT_USER=</span><span style="color:#89DDFF;">\${</span><span style="color:#BABED8;">RABBITMQ_DEFAULT_USER</span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#FFCB6B;">      -</span><span style="color:#C3E88D;"> RABBITMQ_DEFAULT_PASS=</span><span style="color:#89DDFF;">\${</span><span style="color:#BABED8;">RABBITMQ_DEFAULT_PASS</span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#FFCB6B;">    volumes:</span></span>
<span class="line"><span style="color:#FFCB6B;">        -</span><span style="color:#C3E88D;"> /zhangling/rabbitmq/data/:/var/lib/rabbitmq/</span></span>
<span class="line"><span style="color:#FFCB6B;">        -</span><span style="color:#C3E88D;"> /zhangling/rabbitmq/log/:/var/log/rabbitmq</span></span>
<span class="line"><span style="color:#FFCB6B;">    networks:</span></span>
<span class="line"><span style="color:#FFCB6B;">      -</span><span style="color:#C3E88D;"> zhangling-network</span></span>
<span class="line"><span style="color:#FFCB6B;">    labels:</span></span>
<span class="line"><span style="color:#FFCB6B;">      createdBy:</span><span style="color:#89DDFF;"> &quot;</span><span style="color:#C3E88D;">zhangling</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#FFCB6B;">networks:</span></span>
<span class="line"><span style="color:#FFCB6B;">  zhangling-network:</span></span>
<span class="line"><span style="color:#FFCB6B;">    external:</span><span style="color:#89DDFF;"> true</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br></div></div><h2 id="minio" tabindex="-1">MinIO <a class="header-anchor" href="#minio" aria-label="Permalink to &quot;MinIO&quot;">​</a></h2><div class="language-shell line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-palenight vp-code" tabindex="0"><code><span class="line"><span style="color:#FFCB6B;">version:</span><span style="color:#89DDFF;"> &#39;</span><span style="color:#C3E88D;">3</span><span style="color:#89DDFF;">&#39;</span></span>
<span class="line"><span style="color:#FFCB6B;">services:</span></span>
<span class="line"><span style="color:#FFCB6B;">    minio:</span></span>
<span class="line"><span style="color:#FFCB6B;">      image:</span><span style="color:#C3E88D;"> minio/minio:RELEASE.2023-11-11T08-14-41Z</span></span>
<span class="line"><span style="color:#FFCB6B;">      container_name:</span><span style="color:#89DDFF;"> \${</span><span style="color:#BABED8;">CONTAINER_NAME</span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#FFCB6B;">      ports:</span></span>
<span class="line"><span style="color:#FFCB6B;">        -</span><span style="color:#89DDFF;"> \${</span><span style="color:#BABED8;">PANEL_APP_PORT_HTTP</span><span style="color:#89DDFF;">}</span><span style="color:#C3E88D;">:9000</span></span>
<span class="line"><span style="color:#FFCB6B;">        -</span><span style="color:#89DDFF;"> \${</span><span style="color:#BABED8;">PANEL_APP_PORT_API</span><span style="color:#89DDFF;">}</span><span style="color:#C3E88D;">:9001</span></span>
<span class="line"><span style="color:#FFCB6B;">      restart:</span><span style="color:#C3E88D;"> always</span></span>
<span class="line"><span style="color:#82AAFF;">      command</span><span style="color:#C3E88D;">:</span><span style="color:#C3E88D;"> server</span><span style="color:#C3E88D;"> /data</span><span style="color:#C3E88D;"> --console-address</span><span style="color:#C3E88D;"> :9000</span><span style="color:#C3E88D;"> --address</span><span style="color:#C3E88D;"> :9001</span></span>
<span class="line"><span style="color:#FFCB6B;">      environment:</span></span>
<span class="line"><span style="color:#FFCB6B;">        MINIO_ROOT_USER:</span><span style="color:#89DDFF;"> \${</span><span style="color:#BABED8;">MINIO_ROOT_USER</span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#FFCB6B;">        MINIO_ROOT_PASSWORD:</span><span style="color:#89DDFF;"> \${</span><span style="color:#BABED8;">MINIO_ROOT_PASSWORD</span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#FFCB6B;">      logging:</span></span>
<span class="line"><span style="color:#FFCB6B;">        options:</span></span>
<span class="line"><span style="color:#FFCB6B;">          max-size:</span><span style="color:#89DDFF;"> &quot;</span><span style="color:#C3E88D;">5M</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#FFCB6B;">          max-file:</span><span style="color:#89DDFF;"> &quot;</span><span style="color:#C3E88D;">10</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#FFCB6B;">        driver:</span><span style="color:#C3E88D;"> json-file</span></span>
<span class="line"><span style="color:#FFCB6B;">      networks:</span></span>
<span class="line"><span style="color:#FFCB6B;">        -</span><span style="color:#C3E88D;"> zhangling-network</span></span>
<span class="line"><span style="color:#FFCB6B;">      volumes:</span></span>
<span class="line"><span style="color:#FFCB6B;">        -</span><span style="color:#C3E88D;"> /zhangling/minio/data:/data</span></span>
<span class="line"><span style="color:#FFCB6B;">      labels:</span></span>
<span class="line"><span style="color:#FFCB6B;">        createdBy:</span><span style="color:#89DDFF;"> &quot;</span><span style="color:#C3E88D;">zhangling</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#FFCB6B;">networks:</span></span>
<span class="line"><span style="color:#FFCB6B;">  zhangling-network:</span></span>
<span class="line"><span style="color:#FFCB6B;">    external:</span><span style="color:#89DDFF;"> true</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br></div></div><h2 id="emqx" tabindex="-1">EMQX <a class="header-anchor" href="#emqx" aria-label="Permalink to &quot;EMQX&quot;">​</a></h2><div class="language-shell line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-palenight vp-code" tabindex="0"><code><span class="line"><span style="color:#FFCB6B;">version:</span><span style="color:#89DDFF;"> &#39;</span><span style="color:#C3E88D;">3</span><span style="color:#89DDFF;">&#39;</span></span>
<span class="line"><span style="color:#FFCB6B;">services:</span></span>
<span class="line"><span style="color:#FFCB6B;">  emqx:</span></span>
<span class="line"><span style="color:#FFCB6B;">    image:</span><span style="color:#C3E88D;"> emqx/emqx:5.3.0</span></span>
<span class="line"><span style="color:#FFCB6B;">    container_name:</span><span style="color:#89DDFF;"> \${</span><span style="color:#BABED8;">CONTAINER_NAME</span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#FFCB6B;">    restart:</span><span style="color:#C3E88D;"> always</span></span>
<span class="line"><span style="color:#FFCB6B;">    networks:</span></span>
<span class="line"><span style="color:#FFCB6B;">      -</span><span style="color:#C3E88D;"> zhangling-network</span></span>
<span class="line"><span style="color:#FFCB6B;">    user:</span><span style="color:#89DDFF;"> &#39;</span><span style="color:#C3E88D;">0</span><span style="color:#89DDFF;">&#39;</span></span>
<span class="line"><span style="color:#FFCB6B;">    ports:</span></span>
<span class="line"><span style="color:#FFCB6B;">      -</span><span style="color:#89DDFF;"> \${</span><span style="color:#BABED8;">PANEL_APP_PORT_HTTP</span><span style="color:#89DDFF;">}</span><span style="color:#C3E88D;">:18083</span></span>
<span class="line"><span style="color:#FFCB6B;">      -</span><span style="color:#89DDFF;"> \${</span><span style="color:#BABED8;">EMQX_PORT_1883</span><span style="color:#89DDFF;">}</span><span style="color:#C3E88D;">:1883</span></span>
<span class="line"><span style="color:#FFCB6B;">      -</span><span style="color:#89DDFF;"> \${</span><span style="color:#BABED8;">EMQX_PORT_8083</span><span style="color:#89DDFF;">}</span><span style="color:#C3E88D;">:8083</span></span>
<span class="line"><span style="color:#FFCB6B;">      -</span><span style="color:#89DDFF;"> \${</span><span style="color:#BABED8;">EMQX_PORT_8084</span><span style="color:#89DDFF;">}</span><span style="color:#C3E88D;">:8084</span></span>
<span class="line"><span style="color:#FFCB6B;">      -</span><span style="color:#89DDFF;"> \${</span><span style="color:#BABED8;">EMQX_PORT_8883</span><span style="color:#89DDFF;">}</span><span style="color:#C3E88D;">:8883</span></span>
<span class="line"><span style="color:#FFCB6B;">    volumes:</span></span>
<span class="line"><span style="color:#FFCB6B;">      -</span><span style="color:#C3E88D;"> /zhangling/emqx/data:/opt/emqx/data</span></span>
<span class="line"><span style="color:#FFCB6B;">      -</span><span style="color:#C3E88D;"> /zhangling/emqx/log:/opt/emqx/log</span></span>
<span class="line"><span style="color:#FFCB6B;">    labels:</span></span>
<span class="line"><span style="color:#FFCB6B;">      createdBy:</span><span style="color:#89DDFF;"> &quot;</span><span style="color:#C3E88D;">zhangling</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#FFCB6B;">networks:</span></span>
<span class="line"><span style="color:#FFCB6B;">  zhangling-network:</span></span>
<span class="line"><span style="color:#FFCB6B;">    external:</span><span style="color:#89DDFF;"> true</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br></div></div><h2 id="kafka" tabindex="-1">Kafka <a class="header-anchor" href="#kafka" aria-label="Permalink to &quot;Kafka&quot;">​</a></h2><div class="language-shell line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-palenight vp-code" tabindex="0"><code><span class="line"><span style="color:#FFCB6B;">version:</span><span style="color:#89DDFF;"> &#39;</span><span style="color:#C3E88D;">3</span><span style="color:#89DDFF;">&#39;</span></span>
<span class="line"><span style="color:#FFCB6B;">services:</span></span>
<span class="line"><span style="color:#FFCB6B;">  kafka:</span></span>
<span class="line"><span style="color:#FFCB6B;">    container_name:</span><span style="color:#89DDFF;"> \${</span><span style="color:#BABED8;">CONTAINER_NAME</span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#FFCB6B;">    restart:</span><span style="color:#C3E88D;"> always</span></span>
<span class="line"><span style="color:#FFCB6B;">    environment:</span></span>
<span class="line"><span style="color:#FFCB6B;">      ALLOW_PLAINTEXT_LISTENER:</span><span style="color:#89DDFF;"> &#39;</span><span style="color:#C3E88D;">yes</span><span style="color:#89DDFF;">&#39;</span></span>
<span class="line"><span style="color:#FFCB6B;">      KAFKA_CFG_LOG_RETENTION_MS:</span><span style="color:#F78C6C;"> 60000</span></span>
<span class="line"><span style="color:#FFCB6B;">      KAFKA_CFG_MAX_REQUEST_SIZE:</span><span style="color:#F78C6C;"> 524288000</span></span>
<span class="line"><span style="color:#FFCB6B;">      KAFKA_CFG_MESSAGE_MAX_BYTES:</span><span style="color:#F78C6C;"> 524288000</span></span>
<span class="line"><span style="color:#FFCB6B;">      KAFKA_CFG_REPLICA_FETCH_MAX_BYTES:</span><span style="color:#F78C6C;"> 524288000</span></span>
<span class="line"><span style="color:#FFCB6B;">      KAFKA_CFG_FETCH_MESSAGE_MAX_BYTES:</span><span style="color:#F78C6C;"> 524288000</span></span>
<span class="line"><span style="color:#FFCB6B;">      KAFKA_CFG_PARTITION_FETCH_BYTES:</span><span style="color:#F78C6C;"> 524288000</span></span>
<span class="line"><span style="color:#FFCB6B;">      KAFKA_CFG_NODE_ID:</span><span style="color:#F78C6C;"> 0</span></span>
<span class="line"><span style="color:#FFCB6B;">      KAFKA_CFG_PROCESS_ROLES:</span><span style="color:#C3E88D;"> controller,broker</span></span>
<span class="line"><span style="color:#FFCB6B;">      KAFKA_CFG_LISTENERS:</span><span style="color:#C3E88D;"> PLAINTEXT://:9092,CONTROLLER://:9093</span></span>
<span class="line"><span style="color:#FFCB6B;">      KAFKA_CFG_ADVERTISED_LISTENERS:</span><span style="color:#C3E88D;"> PLAINTEXT://</span><span style="color:#89DDFF;">\${</span><span style="color:#BABED8;">CONTAINER_NAME</span><span style="color:#89DDFF;">}</span><span style="color:#C3E88D;">:</span><span style="color:#89DDFF;">\${</span><span style="color:#BABED8;">PANEL_APP_PORT_HTTP</span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#FFCB6B;">      KAFKA_CFG_LISTENER_SECURITY_PROTOCOL_MAP:</span><span style="color:#C3E88D;"> CONTROLLER:PLAINTEXT,PLAINTEXT:PLAINTEXT</span></span>
<span class="line"><span style="color:#FFCB6B;">      KAFKA_CFG_CONTROLLER_QUORUM_VOTERS:</span><span style="color:#C3E88D;"> 0@127.0.0.1:9093</span></span>
<span class="line"><span style="color:#FFCB6B;">      KAFKA_CFG_CONTROLLER_LISTENER_NAMES:</span><span style="color:#C3E88D;"> CONTROLLER</span></span>
<span class="line"><span style="color:#FFCB6B;">    networks:</span></span>
<span class="line"><span style="color:#FFCB6B;">      -</span><span style="color:#C3E88D;"> zhangling-network</span></span>
<span class="line"><span style="color:#FFCB6B;">    ports:</span></span>
<span class="line"><span style="color:#FFCB6B;">      -</span><span style="color:#89DDFF;"> &quot;\${</span><span style="color:#BABED8;">PANEL_APP_PORT_HTTP</span><span style="color:#89DDFF;">}</span><span style="color:#C3E88D;">:9092</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#FFCB6B;">    image:</span><span style="color:#C3E88D;"> bitnami/kafka:3.6.0</span></span>
<span class="line"><span style="color:#FFCB6B;">    labels:</span></span>
<span class="line"><span style="color:#FFCB6B;">      createdBy:</span><span style="color:#89DDFF;"> &quot;</span><span style="color:#C3E88D;">zhangling</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#FFCB6B;">networks:</span><span style="color:#BABED8;">  </span></span>
<span class="line"><span style="color:#FFCB6B;">  zhangling-network:</span><span style="color:#BABED8;">  </span></span>
<span class="line"><span style="color:#FFCB6B;">    external:</span><span style="color:#89DDFF;"> true</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br></div></div><h2 id="nacos" tabindex="-1">Nacos <a class="header-anchor" href="#nacos" aria-label="Permalink to &quot;Nacos&quot;">​</a></h2><div class="language- line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki material-theme-palenight vp-code" tabindex="0"><code><span class="line"><span>version: &quot;3.8&quot;</span></span>
<span class="line"><span></span></span>
<span class="line"><span>services:</span></span>
<span class="line"><span>  nacos:</span></span>
<span class="line"><span>    image: nacos/nacos-server</span></span>
<span class="line"><span>    container_name: nacos-standalone-mysql</span></span>
<span class="line"><span>    env_file:</span></span>
<span class="line"><span>      - /docker-compose/evn_files/nacos-mysql/nacos-standlone-mysql-nacos.env</span></span>
<span class="line"><span>    volumes:</span></span>
<span class="line"><span>      - &quot;/docker/nacos-mysql/standalone-logs/:/home/nacos/logs&quot;</span></span>
<span class="line"><span>    ports:</span></span>
<span class="line"><span>      - &quot;8848:8848&quot;</span></span>
<span class="line"><span>      - &quot;9848:9848&quot;</span></span>
<span class="line"><span>    depends_on:</span></span>
<span class="line"><span>      mysql_naocs:</span></span>
<span class="line"><span>        condition: service_healthy</span></span>
<span class="line"><span>    restart: always</span></span>
<span class="line"><span>  mysql:</span></span>
<span class="line"><span>    container_name: mysql_naocs</span></span>
<span class="line"><span>    build:</span></span>
<span class="line"><span>      context: /docker-compose/dockerfiles/nacos-mysql #若使用. 则相对当前 docker-compose.yml 文件所在目录，基于名称为 Dockerfile 的文件构建镜像</span></span>
<span class="line"><span>      dockerfile: Dockerfile #不过这个只能声明文件名，文件所在路径还是要通过centext来声明。</span></span>
<span class="line"><span>    image: mysql</span></span>
<span class="line"><span>    env_file:</span></span>
<span class="line"><span>      - /docker-compose/evn_files/mysql-nacos/mysql-nacos.env #在public/downloads目录下</span></span>
<span class="line"><span>    volumes:</span></span>
<span class="line"><span>      - &quot;/docker/mysql-nacos/mysql:/var/lib/mysql&quot;</span></span>
<span class="line"><span>    ports:</span></span>
<span class="line"><span>      - &quot;3316:3306&quot;</span></span>
<span class="line"><span>    healthcheck:</span></span>
<span class="line"><span>      test: [ &quot;CMD&quot;, &quot;mysqladmin&quot; ,&quot;ping&quot;, &quot;-h&quot;, &quot;localhost&quot; ]</span></span>
<span class="line"><span>      interval: 5s</span></span>
<span class="line"><span>      timeout: 10s</span></span>
<span class="line"><span>      retries: 10</span></span>
<span class="line"><span>    restart: always</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br></div></div>`,23),o=[e];function r(c,t,i,F,b,y){return a(),n("div",null,o)}const u=s(p,[["render",r]]);export{m as __pageData,u as default};
