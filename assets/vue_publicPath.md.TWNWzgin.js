import{_ as s,c as a,o as n,a4 as e}from"./chunks/framework.CCJHkvW2.js";const y=JSON.parse('{"title":"设置publicPath","description":"","frontmatter":{},"headers":[],"relativePath":"vue/publicPath.md","filePath":"vue/publicPath.md","lastUpdated":1708482714000}'),l={name:"vue/publicPath.md"},p=e(`<h1 id="设置publicpath" tabindex="-1">设置publicPath <a class="header-anchor" href="#设置publicpath" aria-label="Permalink to &quot;设置publicPath&quot;">​</a></h1><p>有些情况需要部署到子路径下，例如：<a href="https://xxx/subPath%EF%BC%8C%E5%8F%AF%E4%BB%A5%E6%8C%89%E7%85%A7%E4%B8%8B%E9%9D%A2%E6%B5%81%E7%A8%8B%E4%BF%AE%E6%94%B9%E3%80%82" target="_blank" rel="noreferrer">https://xxx/subPath，可以按照下面流程修改。</a></p><h2 id="_1、修改vue-config-js中的publicpath属性" tabindex="-1">1、修改vue.config.js中的publicPath属性 <a class="header-anchor" href="#_1、修改vue-config-js中的publicpath属性" aria-label="Permalink to &quot;1、修改vue.config.js中的publicPath属性&quot;">​</a></h2><div class="language-bash line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki material-theme-palenight vp-code" tabindex="0"><code><span class="line"><span style="color:#FFCB6B;">publicPath:</span><span style="color:#C3E88D;"> process.env.NODE_ENV</span><span style="color:#C3E88D;"> ===</span><span style="color:#89DDFF;"> &quot;</span><span style="color:#C3E88D;">production</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;"> ?</span><span style="color:#89DDFF;"> &quot;</span><span style="color:#C3E88D;">/subPath/</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;"> :</span><span style="color:#89DDFF;"> &quot;</span><span style="color:#C3E88D;">/</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">,</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><h2 id="_2、修改router-index-js-添加一行base属性" tabindex="-1">2、修改router/index.js，添加一行base属性 <a class="header-anchor" href="#_2、修改router-index-js-添加一行base属性" aria-label="Permalink to &quot;2、修改router/index.js，添加一行base属性&quot;">​</a></h2><div class="language-bash line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki material-theme-palenight vp-code" tabindex="0"><code><span class="line"><span style="color:#C792EA;">export</span><span style="color:#BABED8;"> default new Router</span><span style="color:#89DDFF;">(</span><span style="color:#BABED8;">{</span></span>
<span class="line"><span style="color:#FFCB6B;">  base:</span><span style="color:#89DDFF;"> &quot;</span><span style="color:#C3E88D;">/subPath</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">,</span></span>
<span class="line"><span style="color:#FFCB6B;">  mode:</span><span style="color:#89DDFF;"> &#39;</span><span style="color:#C3E88D;">history</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">,</span><span style="color:#C3E88D;"> //</span><span style="color:#C3E88D;"> 去掉url中的#</span></span>
<span class="line"><span style="color:#82AAFF;">  scrollBehavior:</span><span style="color:#89DDFF;"> ()</span><span style="color:#BABED8;"> =</span><span style="color:#89DDFF;">&gt;</span><span style="color:#89DDFF;"> (</span><span style="color:#BABED8;">{ y: 0 }),</span></span>
<span class="line"><span style="color:#FFCB6B;">  routes:</span><span style="color:#C3E88D;"> constantRoutes</span></span>
<span class="line"><span style="color:#BABED8;">})</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h2 id="_3、-index路由添加获取子路径-admin" tabindex="-1">3、/index路由添加获取子路径/admin <a class="header-anchor" href="#_3、-index路由添加获取子路径-admin" aria-label="Permalink to &quot;3、/index路由添加获取子路径/admin&quot;">​</a></h2><p>修改layout/components/Navbar.vue中的location.href</p><div class="language-bash line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki material-theme-palenight vp-code" tabindex="0"><code><span class="line"><span style="color:#FFCB6B;">location.href</span><span style="color:#C3E88D;"> =</span><span style="color:#89DDFF;"> &#39;</span><span style="color:#C3E88D;">/subPath/index</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>修改utils/request.js中的location.href</p><div class="language-bash line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki material-theme-palenight vp-code" tabindex="0"><code><span class="line"><span style="color:#FFCB6B;">location.href</span><span style="color:#C3E88D;"> =</span><span style="color:#89DDFF;"> &#39;</span><span style="color:#C3E88D;">/subPath/index</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><h2 id="_4、修改nginx配置" tabindex="-1">4、修改nginx配置 <a class="header-anchor" href="#_4、修改nginx配置" aria-label="Permalink to &quot;4、修改nginx配置&quot;">​</a></h2><div class="language-bash line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki material-theme-palenight vp-code" tabindex="0"><code><span class="line"><span style="color:#FFCB6B;">location</span><span style="color:#C3E88D;"> /subPath</span><span style="color:#C3E88D;"> {</span></span>
<span class="line"><span style="color:#82AAFF;">	alias</span><span style="color:#C3E88D;">   /home/ui</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#FFCB6B;">	try_files</span><span style="color:#BABED8;"> $uri $uri</span><span style="color:#C3E88D;">/</span><span style="color:#C3E88D;"> /subPath/index.html</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#FFCB6B;">	index</span><span style="color:#C3E88D;">  index.html</span><span style="color:#C3E88D;"> index.htm</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#BABED8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>打开浏览器，输入：<a href="https://xxx/admin" target="_blank" rel="noreferrer">https://xxx/admin</a> 能正常访问和刷新表示成功。</p>`,14),o=[p];function t(r,c,i,d,u,b){return n(),a("div",null,o)}const D=s(l,[["render",t]]);export{y as __pageData,D as default};
